---
id: composite-metrics
title: 복합 메트릭스
description: 복합 메트릭스 기능은 복잡한 규칙을 활용해 이벤트를 생성하고 경고 알림을 보낼 수 있습니다. 
keywords: [ 경고 알림, 이벤트 설정, 복합 메트릭스 ]
toc_max_heading_level: 4
---

> 홈 &gt; 프로젝트 선택 &gt; ![알림 아이콘](/img/ic-alert.svg) <Cmdname sid="side_event" className="uitext" /> &gt; <Cmdname sid="side_eventSetting" className="uitext" /> &gt; <Cmdname sid="composite_metrics" className="uitext" /> 탭

복잡한 규칙을 활용해 이벤트를 생성하고 경고 알림을 보낼 수 있습니다. 

## 기본 옵션 {#default-options}

- **검색**: 이벤트 이름 또는 이벤트 수신 태그를 선택해 원하는 이벤트 검색
- **JSON 다운로드/업로드**: 이벤트 규칙은 JSON 편집기를 통해 바로 수정하거나, 파일로 다운로드하여 수정 후 다시 업로드 가능
- **알림 메시지 설정**: 수신할 메시지의 상세 항목 선택 및 항목 별 내용 편집
- **+이벤트 추가**: 새로운 복합 메트릭스 이벤트 추가

:::note

**권한** 

<Cmdname sid="composite_metrics" className="uitext" /> 이벤트를 설정하려면 **알림 설정** 권한이 있어야 합니다. 알림 설정 권한은 **홈 &gt; 프로젝트 선택  &gt; 관리  &gt; 통합 멤버 관리**에서 권한을 부여할 멤버의 ![수정 아이콘](/img/ic-edit.svg) 아이콘을 클릭해 설정할 수 있습니다.

:::

<div class="table-title">표 | 복합 메트릭스 이벤트 목록 구성</div>

| 항목 | 설명 |
| :---: | --- |
| 이벤트 제목 | 사용자가 지정한 이벤트명 <br /> - 최대 255byte까지 입력 가능 |
| 조건 | 이벤트 발생 조건 |
| 이벤트 상태가 해소되면 추가 알림 | <span className="vslow">Critical</span>과 <span className="slow">Warning</span> 레벨의 이벤트가 해소되면 정상(RECOVERED) 상태의 알림 수신 여부 <br /> – 활성화: 진행 중 → 정상 상태로 전환되면 RECOVERED 알림을 보내고, 이벤트 기록에서 진행 중/해소 상태를 구분해 볼 수 있음 <br /> – 비활성화: 임계값을 초과할 때 마다 단발성 이벤트 발생 |
| 이벤트 수신 태그  | 해당 이벤트 알림을 받을 사용자 또는 그룹(수신 태그) |
| ![수정 아이콘](/img/ic-edit.svg) | 이벤트 수정 및 삭제 |
| ![토글 비활성화 아이콘](/img/ic-toggle-off.svg) | 이벤트의 활성화 여부 <br /> – 활성화: 조건을 충족하면 이벤트 발생 <br /> – 비활성화: 이벤트가 동작하지 않으며, 조건을 검사하지 않음 |

## 이벤트 설정  {#event-configuration}

<Cmdname sid="composite_metrics" className="uitext" /> 이벤트는 메트릭스 데이터 질의 언어인 **MXQL**을 기반으로 이벤트 조건을 생성합니다. **차트로 생성하기** 기능은 **MXQL**의 자동완성을 위한 콤보박스 기능을 제공합니다. 

### 이벤트 추가 {#add-alert-policy}

1. ![알림 아이콘](/img/ic-alert.svg) <Cmdname sid="side_event" className="uitext" /> &gt; <Cmdname sid="side_eventSetting" className="uitext" />에서 <Cmdname sid="composite_metrics" className="uitext" /> 탭을 클릭하세요.

1. 화면 오른쪽의 [ + 이벤트 추가 ] 버튼을 클릭하세요.

1. <Cmdname sid="composite_metrics" className="uitext" /> 창에서 차트로 생성하기를 클릭하세요.  

    a. 제공하는 템플릿을 활용할 수 있습니다. 

1. <Cmdname sid="side_eventSetting" className="uitext" /> 화면에서 먼저 이벤트 데이터를 조회하고, 이벤트 조건을 설정하세요.

#### 이벤트 데이터 조회 {#query-event-data}

이벤트 데이터를 조회하여 차트를 구성합니다. <Cmdname sid="side_eventSetting" className="uitext" /> 화면의 오른쪽 <Cmdname sid="flex_event_mxql" className="uitext" />의 **위젯** 또는 **텍스트** 옵션을 선택해 이벤트를 설정하세요.

<Tabs groupId="select-target">
<TabItem value="widget" label="위젯">

시계열 차트를 구성하는 옵션을 통해 이벤트 설정 시 사용할 **MXQL**을 자동 완성할 수 있습니다.

1. 데이터를 조회할 날짜를 선택하세요. 

1. 데이터를 조회할 **카테고리**(대상)를 선택하세요.

1. **필터** 항목의 **+ 필터 추가**를 클릭해 이벤트 조건을 생성하세요.

    a. 필터 창에서 연산식, 태그, 필터 값을 선택하세요.  
    b. **+ 추가**를 클릭해 조건을 추가할 수 있습니다.  
    c. 조건을 삭제하고 싶다면 조건 옆의 <strong>–</strong> 를 클릭하세요.  

1. **그룹화** 항목에서 그룹화된 메트릭스 데이터를 선택하세요. 다중 선택할 수 있습니다. 

1. **타임 유닛** 항목에서 `초`, `분`, `시간` 단위로 그룹화된 데이터를 나눌 시간 기준을 설정하세요. 

1. **필드** 항목에서 이벤트 발행 조건에 사용할 필드를 선택하세요. 다중 선택할 수 있습니다.

</TabItem>
<TabItem value="text" label="텍스트">

:::caution

텍스트 모드로 입력한 mxql은 위젯 모드와 호환되지 않습니다.

:::

**MXQL**을 그대로 수정할 수 있는 편집창이 나타납니다.

1. **MXQL**를 직접 수정하고 **조회** 버튼을 클릭하세요.
2. 날짜를 선택하면 해당 내역을 차트 또는 그래프로 확인할 수 있습니다.

</TabItem>
</Tabs>

#### 알림 {#notification}

경고 알림 설정의 기본 정보를 입력합니다.

- **이벤트 활성화**: 토글 버튼을 활성화 하면 경고 알림을 받을 수 있습니다.

- **레벨**: 이벤트 레벨(Critical, Warning, Info)을 선택하세요.
    - **이벤트 상태가 해소되면 추가 알림**: 토글 버튼을 활성화하면 이벤트가 해소되어 정상(RECOVERED) 상태의 알림이 전송됩니다.

- **제목**: 경고 알림의 제목을 입력하세요.

- **메시지**: 이벤트 발생 시 전달받을 알림 메시지의 내용을 입력하세요. 메시지에 변수를 사용하여 이벤트 발생 시점의 실제 값을 포함할 수 있습니다.
    
    <ImgLang img='event-config-message-example.png' desc='Message example' />
    
:::tip
    
**변수 사용 규칙**
    
- 변수 형식: `${지표명}`
- 설정한 **카테고리와 동일한 카테고리** 내 지표만 변수로 사용 가능합니다.
- 여러 변수를 조합해 상세한 메시지를 구성할 수 있습니다.
- 사용 가능한 변수 목록은 **메트릭스 조회**에서 확인할 수 있습니다.

:::

#### 이벤트 발행 조건 {#event-rule-condition}

- **데이터 조회 범위:** 실시간 데이터 조회 범위를 선택하세요.
    - 조회 가능 범위: `30초`, `1분`, `2분`, `5분`, `10분`, `30분`, `1시간`, `2시간`, `3시간`

- **조건:** 이벤트 발생 조건을 입력하세요. 이벤트 데이터 조회에 포함된 필드만 사용할 수 있습니다.

##### 부가정보 {#additional}

- **인터벌**: 선택한 시간(`1분`, `5분`, `10분`, `30분`, `1시간`, `12시간`) 간격으로 알림 조건을 확인합니다.

- **무음**: 이벤트 발생한 후, 선택한 시간(`unset`, `1분`, `5분`, `10분`, `30분`, `1시간`, `12시간`) 동안 같은 이벤트가 발생되지 않습니다.

- **이벤트 동작 시간**: 이벤트가 특정 시간대(근무/비근무/점검 시간 등)에 이벤트가 동작하도록 태그를 설정하세요. 태그를 설정하지 않으면 이벤트가 활성화된 상태에서 24시간 상시 동작합니다.
    
    1. **+ 추가**를 클릭하세요.

    1. **이벤트 동작 시간**에서 **+ 새로운 태그 생성**을 클릭하세요. 

    1. **이벤트 동작 시간 태그 생성**에서 **태그 이름, 요일, 시간, 색상**을 선택하고 [ 적용 ] 버튼을 클릭하세요. 

    1. 생성한 태그는 태그 목록에서 확인할 수 있으며, 체크 박스를 선택하면 적용됩니다. 

    1. 수정 또는 삭제할 태그의 ![수정 아이콘](/img/ic-edit.svg) 아이콘을 클릭해 **이벤트 동작 시간 태그 수정**에서 태그를 수정하거나 태그 삭제할 수 있습니다. 
    
    :::caution
    
    태그 삭제 시 해당 태그가 적용된 모든 사용자의 태그가 제거됩니다. 단, 이벤트 규칙에서 사용 중인 태그는 삭제할 수 없습니다.
    
    :::
    
- **이벤트 수신 태그**: 이벤트에 수신 태그를 설정하면, 해당 태그를 가진 프로젝트 멤버에게 알림을 전송합니다. 수신 태그를 설정하지 않으면 프로젝트 내 모든 사용자에게 알림이 전송됩니다.
    
    1. **+ 태그 추가** 또는 <strong>+</strong>를 클릭하세요.

    1. **이벤트 수신 태그** 창 아래의 **+ 새 태그 생성**을 클릭하세요.

    1. **태그 생성** 창에서 태그 이름을 입력하고 색상을 선택한 후, [ 태그 생성 ] 버튼을 클릭해 태그를 생성하세요. 

    1. 생성된 태그는 태그 목록의 ![수정 아이콘](/img/ic-edit.svg) 아이콘을 클릭해 수정 또는 삭제하세요. 

    1. **이벤트 수신 태그** 창에서 **태그 목록**에서 원하는 태그를 선택하면 적용됩니다.

    :::tip
    
    이벤트 설정 시 이벤트 수신 태그를 선택하여 해당 태그를 가진 프로젝트 멤버와 3rd-party 플러그인에 알림을 전송할 수 있습니다. <Cmdname sid="side_event" className="uitext" /> &gt; <Cmdname sid="side_eventNoti" className="uitext" />에서 프로젝트 멤버와 3rd-party 플러그인에 각각 태그를 지정할 수 있습니다.
    
    :::

#### 이벤트 규칙 테스트 {#test-event-rules}

설정한 조건을 과거 데이터에 기반으로 테스트를 진행해, 몇 건의 이벤트가 발생할지 예측할 수 있습니다. 

1. 이벤트 규칙을 테스트할 날짜를 선택하고 [ 확인 ] 버튼을 클릭하세요.

1. [ 실행 ] 버튼을 클릭해 이벤트 발생 건수를 확인하세요.

### 이벤트 수정/삭제 {#edit-delete-event}

1. <Cmdname sid="side_event" className="uitext" /> &gt; <Cmdname sid="side_eventNoti" className="uitext" />의 <Cmdname sid="composite_metrics" className="uitext" /> 탭으로 이동하세요.

1. 복합 메트릭스 목록에서 수정 또는 삭제하려는 이벤트의 ![수정 아이콘](/img/ic-edit.svg) 아이콘을 클릭하세요.
    
1. <Cmdname sid="side_eventNoti" className="uitext" /> 화면에서 옵션을 수정하고, [ 저장 ] 버튼을 클릭하세요.  

    a. 선택한 이벤트를 삭제하려면 <Cmdname sid="side_eventNoti" className="uitext" /> 화면의 오른쪽 위의 [ 삭제 ] 버튼을 클릭하세요.


### 이벤트 공유 {#event-sharing}

import Alerteventsharing from "../../common-items/_alert-event-sharing.mdx";

<Alerteventsharing />

## 알림 메시지 설정 {#alert-message}

수신할 메시지의 상세 항목을 선택하고, 항목 별 내용을 편집할 수 있습니다.

## 참고 {#reference} 

### MXQL 문법 가이드 {#mxql-syntax-guide}

<Cmdname sid="composite_metrics" className="uitext" />는 MXQL 쿼리를 기반으로 동작합니다. 자세한 문법은 [MXQL 문법 가이드](https://docs.whatap.io/mxql/mxql-guide)를 참고하시기 바랍니다.