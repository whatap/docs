---
id: install-agent
title: 설치하기
description: Amazon CloudWatch 아이템 설치를 안내합니다.
tags: [ 설치하기, Amazon CloudWatch, 클라우드 ]
---

import TR from '@site/src/components/TR';
import ProdImg from '@site/src/components/ChangeImgName.js';

와탭 Amazon CloudWatch 모니터링은 API 연동을 통해 메트릭을 주기적으로 수집합니다. 수집을 원하는 서비스에 해당하는 CloudWatch 네임스페이스에서 5분 간격으로 원하는 스탯을 취사선택해 수집합니다. 모니터링 시작 시 모든 리전의 사용자 자원을 검색하여 원클릭으로 모니터링을 시작할 수 있습니다. Role 방식 인증으로 안전하고 편리하게 사용할 수 있습니다. 

import Createprojectcloud from "../getting-started/_create-project-cloud.mdx";

<Createprojectcloud />

## 사전 점검 사항

필요한 권한과 권장되는 정책을 확인하세요.

| Resouce          | 권한 |
| ---------------- | ---- |
| CloudWatch       | Read |
| EC2              | Read |
| ElasticCache     | Read |
| CloudFront       | Read |
| Dynammodb        | Read |
| ElasticBeansTalk | Read |
| AutoScaling      | Read |
| EFS              | Read |
| RDS              | Read |

* **권장 Policy**
  * arn:aws:iam::aws:policy/ReadOnlyAccess

## 모니터링 절차

1. Amazon 인증 정보를 입력하세요.
1. CloudWatch 네임스페이스 및 수집 주기를 선택하세요.
1. 리전, 메트릭스, 스탯 등을 선택하세요.

:::note

설치 후 사용량에 따라 와탭 요금과는 별개로 클라우드에서 추가 비용이 발생할 수 있습니다. 설치 전 사용 중인 클라우드 서비스의 가격 정책을 [다음 문서](https://aws.amazon.com/ko/cloudwatch/pricing/)에서 확인하세요.

:::

### 인증 정보 입력 

Role ARN을 이용한 설치 방법을 지원합니다. 와탭 AWS 계정(**911937781722**)이 직접 사용자 Role을 Assume하여 Cloudwatch 정보를 수집합니다. Role Assume은 액세스 키 발급이 불필요해 안전하고 편리합니다.

:::note

Role을 이용한 설정을 권장합니다. Access Key 활용은 기존 Access Key 사용자만 가능합니다.

:::

#### 역할(Role) 생성

<ImgLang img='cloudwatch-auth-role.png' desc='Amazon Cloudwatch - role' />

1. AWS Management Console에 로그인 후 IAM 콘솔을 여세요.
1. 콘솔의 탐색창에서 역할을 선택한 후 역할 생성을 선택하세요. 
1. 신뢰할 수 있는 엔티티 유형(Select type of trusted entity)에서 AWS 계정을 선택하세요. 
1. 다른 AWS 계정을 선택하고 계정 ID에 와탭 ID인 **911937781722** 를 입력 후 다음을 클릭하세요.
1. 필터링 기준 유형에서 AWS 관리형 직무를 선택하세요. 
1. 목록에서 ReadOnlyAccess 체크박스를 선택해 적용 후 다음을 클릭하세요. 
1. 역할(Role)의 이름과 설명을 입력하고 역할 생성(Create Role) 버튼을 클릭하세요. 
1. 역할 목록에서 생성한 역할을 선택 후 요약(Summary)의 편집 버튼을 클릭하세요. 
1. 최대 세션 지속 시간(Maximum session duration) 항목을 12시간으로 변경 후 저장하세요. 
1. **Role ARN** 항목을 복사하세요.
1. 와탭 ***관리*** > ***에이전트 설치*** 페이지로 돌아가 ***Role*** ***ARN*** 창에 복사한 **Role ARN**을 붙여넣고 ***확인*** 버튼을 클릭하세요.

### 네임스페이스 및 수집 주기 선택

import Namespacecollect from "../common-items/_namespace-collect.mdx";

<Namespacecollect />

#### 와탭 수집 주기

import Collectingperiod from "../common-items/_collecting-period.mdx";

<Collectingperiod />

#### 네임스페이스

* AWS ACMPrivateCA
* AWS AmazonMQ
* AWS ApplicationELB Monitoring
* AWS AppSync
* AWS Athena
* AWS AutoScaling
* AWS Elastic Beanstalk Health
* AWS Billing
* AWS Cassandra
* AWS Chatbot
* AWS Cloud Front
* AWS CloudHSM
* AWS CloudSearch
* AWS CodeBuild
* AWS CodeGuruProfiler
* AWS Cognito
* AWS Connect
* AWS ContainerInsights Monitoring
* AWS DataSync
* AWS DAX
* AWS DDoSProtection
* AWS DMS
* AWS DocDB
* AWS DX
* AWS Dynamo DB
* AWS Ebs Usage
* AWS EC2 Monitoring
* AWS EC2 Alert Config
* AWS EC2Spot
* AWS ECS
* AWS EFS
* AWS ElastiCache Usage
* AWS ElasticGPUs
* AWS ElasticInference
* AWS ElasticMapReduce
* AWS ElasticTranscoder
* AWS Classic ELB Monitoring
* AWS ES
* AWS Events
* AWS Firehose
* AWS FSx
* AWS GameLift
* AWS GatewayELB
* AWS Glue
* AWS GroundStation
* AWS Health
* AWS Inspector
* AWS IoT
* AWS IoTAnalytics
* AWS IoTSiteWise
* AWS IVS
* AWS Kafka
* AWS Kinesis
* AWS KinesisAnalytics
* AWS KinesisVideo
* AWS KMS
* AWS Lambda
* AWS Lex
* AWS Location
* AWS Logs
* AWS LookoutMetrics
* AWS MediaConnect
* AWS MediaConvert
* AWS MediaPackage
* AWS MediaStore
* AWS MediaTailor
* AWS ML
* AWS NATGateway
* AWS Neptune
* AWS NetworkELB
* AWS NetworkFirewall
* AWS OpsWorks
* AWS Polly
* AWS QLDB
* AWS RDS Monitoring
* AWS Redshift
* AWS Robomaker
* AWS Route53
* AWS S3
* AWS SageMaker
* AWS SDKMetrics
* AWS ServiceCatalog
* AWS SES
* AWS SNS
* AWS SQS
* AWS SQS Message
* AWS SSM-RunCommand
* AWS States
* AWS StorageGateway
* AWS SWF
* AWS Textract
* AWS ThingsGraph
* AWS Timestream
* AWS Transfer
* AWS TransitGateway
* AWS Translate
* AWS TrustedAdvisor
* AWS Api Usage
* AWS VPN Monitoring
* AWS WAF
* AWS WorkMail
* AWS WorkSpaces

### 리전, 메트릭스, 스탯 선택

import Regionmetricstats from "../common-items/_region-metric-stats.mdx";

<Regionmetricstats />

<ImgLang img='amazon_cloudwatch_setup_dialog_2nd.png' desc='Amazon Cloudwatch - Region,Metric,Stats' />

## 데이터 수집 비활성화 및 서비스 초기화{#data-deactivation}

<ImgLang img='amazon-cloudwatch-deact.png' desc='비활성화 및 서비스 초기화 sc' />

* ![지시선 a](/img/char-a.svg) 수집 토글 ![아이콘](/img/ic-toggle-off.svg) 비활성화 시 데이터 수집이 중지됩니다.

* ![지시선 b](/img/char-b.svg) ***역할(Role) 변경*** 버튼을 선택해 ***에이전트 설치*** 화면에서 ![지시선 c](/img/char-c.svg) ***서비스 초기화*** 선택 시 메트릭을 수집 중인 모든 서비스를 비활성화 합니다.

* 완전한 비용 발생 방지를 위해서는 **AWS IAM** 콘솔에서 **역할**(Role)을 제거해야 합니다.