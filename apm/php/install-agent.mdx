---
id: install-agent
title: 에이전트 설치
description: PHP 환경에서 동작하는 애플리케이션 서버에 적용할 수 있는 에이전트 설치 방법을 확인하세요.
tags: [ PHP, 에이전트 ]
---

import DocCardList from '@theme/DocCardList';
import TR from '@site/src/components/TR';

{@include: ../../common-items/_agent-signup-guide.mdx}

{@youtube: yL6BFY6_rrw}

{@include: ../../getting-started/_create-project-v2.mdx}

{@include: ../../getting-started/_accesskey.mdx}

{@include: ../_download-php-agent.mdx}

PHP 에이전트 설치 방식은 **리눅스 패키지 설치** 방식입니다. 설치 순서는 다음과 같습니다.

1. 와탭 **리포지토리**를 등록하세요.

1. whatap-php **리눅스 패키지**(yum, apt-get)를 설치하세요.

1. **설정 스크립트**를 실행하세요. 설정 스크립트를 통해서 트레이서는 **PHP 확장 모듈**로 등록되고, 에이전트는 **whatap-php 서비스**로 실행됩니다.

    ![php](https://img.whatap.io/media/images/php.png)

1. Apache 또는 PHP-FPM을 **다시 시작**하세요.

<!-- 상단 트레이서 등록 안내 개요 페이지로 옮길지 고민 -->

:::note
에이전트 파일 구성에 대한 자세한 설명은 PHP 파일 구성을 참조하세요.
:::

<details>
<summary>PHP 에이전트 파일 구성</summary>

PHP 에이전트 파일은 애플리케이션 모니터링에 필요한 정보를 추출하여 와탭 수집 서버로 전달하는 트레이서, 수집된 정보를 서버에 전송하기 위한 에이전트, 트레이서와 에이전트를 서버에 동적으로 적용하기 위한 설치 스크립트 파일로 구성되어 있습니다.

* *whatap_```X.Y.Z```.so*<br/>
    트레이서로 등록된 PHP 확장 모듈로 추가되어 정보를 수집하고 수집된 정보를 에이전트로 전송하는 라이브러리입니다.  

    확장 모듈은 PHP 버전(PHP API Version)별, Zend Thread Safe 지원 여부로 구별됩니다. 예시는 다음과 같습니다. 
    * *whatap_zts_20041225.so*  
        PHP 5.2 버전, Zend Thread safe enable
    * *whatap_20041225.so*  
        PHP 5.2 버전, Non Thread Safe 

* *whatap-php(whatap_php)*<br/>
    에이전트, 트레이서에서 UDP로 전달된 정보를 수집 서버로 전송하는 프로그램입니다.

* */etc/init.d/whatap-php*<br/>
    서비스 스크립트입니다.

* *whatap_php*<br/>
    서비스 실행 파일입니다.

* *whatap.ini*<br/>
    애플리케이션 서버의 데이터를 수집하는 PHP 확장 모듈의 설정 정보, 수집 서버의 주소와 서버의 프로젝트 액세스 키가 입력되는 파일입니다.

* *whatap-install-`yyyymmdd`.log*<br/>
    설치 과정에 대한 로그 파일입니다. 기본 저장 경로는 */usr/whata/php/logs* 입니다. 날짜별로 파일이 생성됩니다. 기본 7일 동안의 로그만 유지됩니다.

* *whatap-boot-`yyyymmdd`.log*<br/>
    에이전트 로그 파일입니다. 기본 저장 경로는 */usr/whata/php/logs* 입니다. 날짜별로 파일이 생성됩니다. 기본 7일 동안의 로그가 유지됩니다.

* *install.sh*<br/>
    설치 스크립트입니다. PHP 확장 모듈(*whatap.so*)을 Apache 또는 PHP-FPM에 설치, whatap-php 서비스 설치를 진행합니다. 자세한 내용은 [다음 문서](agent-troubleshooting#extension-modul-manual-setting)를 참조하세요.

* *WhaTap.php (sample.php)*<br/>
    PHP 소스코드에서 사용할 API 레퍼런스 클래스(*/usr/whatap/php/lib/WhaTap.php*) 및 예제 소스 파일(*sample.php*)입니다.

</details> 

사용하는 애플리케이션 서버 환경에 따른 설치 방법을 다음과 같이 제공합니다. 에이전트를 설치하고 적용하기 전에 [지원 환경](supported-spec)을 먼저 확인하세요.

<DocCardList/> 