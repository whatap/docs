홈 화면 &gt; 프로젝트 선택 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbSqlAnalysis" className="uitext" />

데이터베이스에서 실행되는 SQL 문을 분석하여 성능 문제를 진단하는 데 유용한 자료를 제공합니다. <Cmdname sid="side_dbSqlAnalysis" className="uitext" /> 메뉴는 두 가지 주요 탭으로 구성되어 있습니다. 

* ***Access Statistics***: 성능 저하의 원인이 될 수 있는 Full Scan이 발생한 SQL을 확인할 수 있습니다.

* ***Plan Change History***: 동일한 SQL ID를 가진 SQL 문이 옵티마이저에 의해 다른 실행 플랜으로 변경된 경우를 감지합니다. 이는 성능에 영향을 줄 수 있으므로 모니터링이 필요합니다.

## Access Statistics {#access_statistics}

성능 저하의 원인이 될 수 있는 Full Scan이 발생한 SQL을 확인할 수 있습니다. 시간별, 유형별 Full Scan 발생 횟수를 확인할 수 있습니다. 이를 통해 Full Scan을 자주 발생시키는 SQL 문을 최적화하고, 불필요한 Full Scan을 줄임으로서 자원 사용량을 최적화할 수 있습니다. 또한 Full Scan을 Index Scan으로 대체해 쿼리 성능을 향상시키는 방법을 고려해 보세요.

<ImgLang img="db-analysis-sql-access-statistics.png" desc="AccessStatistics" />

화면 위에서 조회 시간 및 대상을 선택하세요. <Cmdname sid="time" className="uitext" />과 <Cmdname sid="instance" className="uitext" /> 옵션을 설정한 다음 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요. 필요한 경우 <Cmdname sid="filter" className="uitext" /> 옵션을 설정해 원하는 조회 결과를 필터링할 수 있습니다.

* ***Access Count***: 시간대별 Full Scan 발생 횟수를 확인할 수 있는 막대 그래프 차트입니다. 특정 시간대를 선택하면, 선택한 시간에 수행된 SQL 목록이 화면 아래 목록과 오른쪽 ***Operation Count*** 차트에 표시됩니다.

* ***Operation Count***: Full Scan이 발생한 유형과 그 수를 확인할 수 있습니다. 각 막대에 마우스를 오버하면 오브젝트 이름을 확인할 수 있습니다.

  ![Operation Count](/img/db-analysis-sql-access-statistics-op-count.png)

{/* 쿼리 자세히 보기 */}
import QueryDetails from "../common-items/_db-query-details.mdx";

<QueryDetails level={3} />

### 조회 결과 필터링하기

조회된 결과에서 다음 항목의 값을 기준으로 원하는 결과를 필터링할 수 있습니다.

:::info

* ***Access Type***: **Full Scan** 또는 **Index Scan** 기준으로 결과를 필터링할 수 있습니다.

* ***Object Name***: 오브젝트 이름을 기준으로 필터링할 수 있습니다.

:::

#### Access Type 필터 조건 추가하기

1. <Cmdname sid="filter" className="uitext" /> 옵션을 선택하세요.

    <ImgLang img="db-analysis-sql-access-statistics-filter.png" desc="필터" />

1. <Cmdname sid="TTL06737" className="uitext" />에서 ***FULL*** 또는 ***INDEX*** 항목을 선택하세요.

1. <Cmdname sid="apply" className="uitext" /> 버튼을 선택하세요.

1. 선택한 조건을 SQL 목록에 반영하려면 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

:::note

Full Scan, Index Scan을 모두 검색하려면 <Cmdname sid="TTL06737" className="uitext" />에서 ***FULL***, ***INDEX*** 옵션을 모두 선택하세요. 또는 ![더하기 아이콘](/img/ic-s-plus.svg) 버튼을 선택해 필터 옵션을 추가할 수도 있습니다.

:::

#### Object Name 필터 조건 추가하기

<ImgLang img="db-analysis-sql-access-object-filter-add.png" desc="필터" />

1. <Cmdname sid="filter" className="uitext" /> 옵션에서 <LinkImage img="ico-add.svg" className="ico" /> 버튼을 선택하세요.

1. <Cmdname sid="TTL06617" className="uitext" /> 팝업에서 ***Object Name*** 항목과 <Cmdname sid="equal" className="uitext" /> 조건을 선택하세요.

1. 빈 입력란을 선택하고, 표시되는 오브젝트 목록에서 원하는 오브젝트 이름을 선택하세요.

1. <Cmdname sid="apply" className="uitext" /> 버튼을 선택하세요.

1. 선택한 조건을 SQL 목록에 반영하려면 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

:::note

* 필터링 조건을 추가하려면 <Cmdname sid="bsm_button_add" className="uitext" /> 버튼을 선택한 다음 1 ~ 5의 과정을 반복하세요. 추가한 조건은 AND(`&&`) 조건으로 적용됩니다.

* 조건 추가 중 일부 항목을 삭제하려면 필터 조건 오른쪽에 ![삭제 아이콘](/img/ico-trash.svg) 버튼을 선택하세요. 전체 조건을 삭제하려면 ![삭제 아이콘](/img/ico-trash.svg) <Cmdname sid="BTN06616" className="uitext" /> 버튼 선택하세요.

* <Cmdname sid="filter" className="uitext" /> 옵션에 적용된 조건을 빠르게 삭제하려면 <LinkImage img="ico-close.svg" className="ico" /> 버튼을 선택하세요.

:::

#### 필터 조건 수정하기

<ImgLang img="db-analysis-sql-access-object-filter-edit.png" desc="필터 수정하기" />

<Cmdname sid="filter" className="uitext" /> 옵션에 적용된 항목을 클릭하세요. <Cmdname sid="TTL06737" className="uitext" /> 창이 나타나면 원하는 항목을 수정하고 <Cmdname sid="apply" className="uitext" /> 버튼을 선택하세요.


## Plan Change History {#plan_change_history}

동일한 SQL ID를 가진 SQL 문이 옵티마이저에 의해 다른 실행 플랜으로 변경된 경우를 감지합니다. 이는 성능에 영향을 줄 수 있으므로 모니터링이 필요합니다. 플랜 변경으로 인한 성능 변화를 감지하고 대응하여 불필요한 플랜 변경을 식별하여 SQL 성능의 일관성을 유지할 수 있습니다.

<ImgLang img="db-analysis-sql-plan-change-history.png" desc="Plan Change History" />

화면 위에서 조회 시간 및 대상을 선택하세요. <Cmdname sid="time" className="uitext" />과 <Cmdname sid="instance" className="uitext" /> 옵션을 설정한 다음 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

***Plan Change Count*** 섹션은 시간대별 플랜 변경이 일어난 횟수를 확인할 수 있는 막대 그래프 차트입니다. 특정 시간대를 선택하면, 선택한 시간의 플랜 변경 목록을 표시합니다. 


### Plan 변경 사항 확인하기

화면 하단의 목록에서 특정 변경 항목을 선택하면 화면 아래에 플랜 변경 전후의 세부 내용을 확인할 수 있는 ***Query*** 섹션이 표시됩니다. 플랜 변경 전후의 차이를 상세히 비교함으로써 어떤 변경이 성능에 영향을 미쳤는지 파악할 수 있습니다.

<ImgLang img="db-analysis-sql-plan-change-history-diff.png" desc="Plan Change History" />

* ***Query*** 섹션에서 오른쪽 상단의 ![새창보기 아이콘](/img/ic-popup.svg) 버튼을 선택하면 해당 섹션을 새창으로 열어 확인할 수 있습니다.

* ***Query*** 섹션을 닫으려면 오른쪽 상단의 ![닫기 아이콘](/img/ico-close.svg) 버튼을 선택하세요.