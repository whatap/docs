## 컴팩트한 액티브 스택 수집

액티브 스택은 스레드 덤프를 정기적으로 수행하기 때문에 잘못 구현되면 에이전트에 오버헤드가 커질 수 있습니다. 와탭은 에이전트 부하를 최소화하면서 액티브 스택을 수집하기 위해 다양한 옵션들을 가지고 있습니다.

:::tip

***사이트맵*** > ***스레드 목록/덤프*** 메뉴에서 스레드 목록 중에 ***WhaTap-ActiveStackDump*** 스레드의 ***CPU Time***을 확인하면 오버헤드를 판단할 수 있습니다.

:::

**최적화된 데이터 수집**

* 트랜잭션을 수행 중인 스레드에 대해서만 스택을 덤프합니다.

* 액티브 스택 덤프 시간 간격을 조정할 수 있습니다. 

  `active_stack_second=10`

* 액티브 스택의 최대 라인에 제한되어 있습니다. Top 라인에서부터 기본 50라인을 수집합니다.

  `trace_active_callstack_depth=50`

* 액티브 스택의 각 라인은 해시 처리되어 수집됩니다. text는 한 번만 수집됩니다. 

* 한 타임에 수집되는 최대 액티브 스택 개수도 제한되어 있습니다.

  `active_stack_count=100`