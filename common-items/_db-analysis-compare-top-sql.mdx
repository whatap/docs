홈 화면 &gt; 프로젝트 선택 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbTopSqlComparison" className="uitext" />

특정 날짜를 기준으로 설정된 시간대의 SQL의 추이를 비교할 수 있습니다. 사용자는 여러 기준을 선택하여 SQL의 성능을 비교하고 <UI>Summary Chart</UI>를 통해 시계열 그래프로 확인할 수 있습니다. 또한, 화면 아래에 테이블 목록에서는 기준 날짜와 비교 날짜의 **Top SQL** 순위와 등락을 비교할 수 있습니다.

<ImgLang img="db-analysis-compare-top-sql.png" desc="Top SQL 비교" />

* **SQL 성능 파악**: 사용자는 <Cmdname sid="side_dbTopSqlComparison" className="uitext" /> 메뉴를 통해 SQL의 성능을 쉽게 파악할 수 있습니다. SQL의 실행 횟수, 최대 경과 시간, 총 경과 시간, 대기 시간 등을 비교함으로써 시스템의 성능 문제를 신속하게 감지할 수 있습니다.

* **시간별 추이 확인**: <UI>Summary Chart</UI>를 통해 시간에 따른 SQL의 성능 변화를 시각적으로 확인할 수 있습니다. 이를 통해 사용자는 시스템의 부하가 발생한 시간대나 성능 저하가 발생한 구간을 빠르게 파악하여 대응할 수 있습니다.

* **Top SQL 비교**: 화면 아래에 테이블 목록에서는 기준 날짜와 비교 날짜의 Top SQL 순위를 비교할 수 있습니다. 이를 통해 사용자는 SQL의 성능 변화를 확인하고, 비교하여 성능 개선에 필요한 조치를 취할 수 있습니다.

## Top SQL 비교하기

화면 위에서 Top SQL 비교를 위한 조건들을 설정한 다음 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

* <Cmdname sid="reference_time" className="uitext" />: 비교를 위한 기준 시간을 설정하세요. 최대 24시간까지 설정할 수 있습니다. 녹색 버튼을 클릭하면 조회 시간을 선택할 수 있는 옵션을 표시됩니다. 사용자가 원하는 시간을 직접 설정하려면 날짜 및 시간 영역을 선택하세요.

  :::note

  * 최대 조회할 수 있는 시간 범위는 24시간입니다.

  * <Cmdname sid="reference_time" className="uitext" /> 옵션 이용 방법에 대한 자세한 내용은 [다음 문서](usage-ui#timeselector)를 참조하세요.

  :::

* <Cmdname sid="ITM08026" className="uitext" />: <Cmdname sid="reference_time" className="uitext" />에서 설정한 시간과 비교할 날짜 또는 시간을 선택하세요. 원하는 조건을 선택한 다음 <Cmdname sid="BTN06053" className="uitext" /> 버튼을 선택하세요.

  | <Cmdname sid="move_date" className="uitext" /> | <Cmdname sid="ITM08027" className="uitext" /> |
  | :--: | :--: |
  | <ImgLang img="db-analysis-comapre-top-sql-date.png" desc="일시" /> | <ImgLang img="db-analysis-comapre-top-sql-time.png" desc="시간" /> |

* <Cmdname sid="instance" className="uitext" />: SQL 비교를 위해 인스턴스 대상을 선택하세요.

* <Cmdname sid="TTL06346" className="uitext" />: 비교 기준을 선택하세요. 선택한 항목에 따라 차트를 생성하고 순위를 정렬합니다.

  * <UI>excute count</UI>: 실행 횟수를 기준으로 조회 결과를 정렬합니다.

  * <UI>elapsed max</UI>: 최대 경과 시간을 기준으로 조회 결과를 정렬합니다.

  * <UI>elapsed time</UI>: 총 경과 시간을 기준으로 조회 결과를 정렬합니다.

  * <UI>elapsed wait</UI>: 대기 시간을 기준으로 조회 결과를 정렬합니다.

* <Cmdname sid="TTL07773" className="uitext" />: 화면 아래에 SQL 순위 테이블 목록에 표시되는 개수를 설정하세요.

## Summary Chart

<UI>Summary Chart</UI>에서는 기준 날짜와 비교 날짜의 SQL 추이를 비교할 수 있는 시계열 그래프를 제공합니다. 이를 통해 사용자는 시간에 따른 SQL의 성능 변화를 쉽게 파악할 수 있습니다.

<ImgLang img="db-analysis-comapre-top-sql-summary-chart.png" desc="Summary Chart" />

* <span class="normal">◼︎</span> 파란색 그래프: 기준 날짜를 의미하면 오른쪽의 수치는 평균값을 의미합니다.

* <span class="mstop">◼︎</span> 회색 그래프: 비교 날짜를 의미하며 오른쪽의 수치는 평균값을 의미합니다.

## SQL 순위 비교하기

화면 아래에 SQL 순위 테이블에서는 상위 SQL 목록이 표시됩니다. 표시되는 개수는 화면 위에 <Cmdname sid="TTL07773" className="uitext" />에서 설정할 수 있습니다.

![Top SQL](/img/db-analysis-comapre-top-sql-table.png)

왼쪽에 배치된 테이블은 기준 날짜에 해당하는 SQL 순위가, 오른쪽에는 비교 날짜에 해당하는 SQL 순위가 표시됩니다. 기준 날짜 테이블의 <UI>ranck changed</UI> 컬럼을 통해 비교 날짜 대비 변화된 등락을 확인할 수 있습니다.

예를 들어, 사용자가 <UI>elapsed time</UI>(경과 시간)을 기준으로 비교했을 때, 비교 날짜 대비 기준 날짜에 같은 SQL 문의 경과 시간이 더 늘어났다면 해당 SQL 문의 성능을 검토해볼 필요가 있습니다. 쿼리 최적화 또는 인덱스를 사용해 성능을 최적화해보세요.

### 쿼리 미리보기

<ImgLang img="db-analysis-comapre-top-sql-table-preview-query.png" desc="쿼리 미리보기" />

SQL 순위 테이블에서 <UI>query</UI> 컬럼 항목에 마우스를 오버하면 해당 SQL 문의 쿼리를 확인할 수 있습니다.