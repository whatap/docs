<Title hashid="basicusage" level={props.level}>기본 사용 안내</Title>

<Xclude product="mssql"><ProdImg img='db-locktress-basic.png' desc='Lock tree' /></Xclude>

<InDoc product="mssql"><ImgLang img="db-locktress-basic-mssql-v2.png" desc="Lock tree" /></InDoc>

<Xclude product='postgresql,mysql,altibase,mssql,mssql-v1,cubrid,tibero,db2'>

원하는 ![숫자 1](/img/number-01.png) 날짜와 시간을 설정한 다음 ![숫자 2](/img/number-02.png) 목록에서 인스턴스를 선택하세요. 설정한 시간에 락이 발생했다면 ***lock wait sessions***와 화면 아래 테이블에 조회한 데이터를 표시합니다.

:::note

<Cmdname sid="time" className="uitext" /> 옵션 이용 방법에 대한 자세한 내용은 [다음 문서](usage-ui#timeselector)를 참조하세요.

:::

</Xclude>

<InDoc product='postgresql,mysql,altibase,cubrid'>

![숫자 1](/img/number-01.png) <Cmdname sid="time" className="uitext" />, ![숫자 2](/img/number-02.png) <Cmdname sid="instance" className="uitext" />에서 조회하길 원하는 날짜와 시간, 인스턴스를 선택하세요. 설정한 시간에 락이 발생했다면 ***Lock Wait Sessions***와 화면 아래 ***Lock Tree*** 테이블에 조회한 데이터를 표시합니다.

* 한 차트 내에서 최대 2주간의 데이터를 한 번에 볼 수 있습니다. 그래프 차트에서 특정 시간을 클릭하면 화면 아래 테이블에서 선택한 시간의 락 정보를 확인할 수 있습니다. 화면 아래 상세 정보에서 초 단위 버튼을 선택하면 5초 단위로 락 정보를 조회할 수 있습니다.

  :::note

  ***Lock Wait Sessions*** 차트의 오른쪽 위에 표시된 태그를 통해 조회 단위를 확인할 수 있습니다.

  :::

* 그래프 차트에서 특정 시간 영역을 계속해서 드래그(드릴다운)할수록 상세 시간의 차트와 락 트리를 조회할 수 있습니다.

* 차트에서 3시간 이내로 드래그해서 5초 단위의 데이터를 조회할 수 있습니다. 다만 5초 단위의 데이터는 최근 한 달 범위에서만 조회할 수 있습니다. 한 달 이전의 데이터는 5분 요약 데이터로만 볼 수 있습니다. 예를 들어, 40일 전의 락 트릭 데이터를 드래그(드릴다운)해서 5분 요약 데이터를 조회할 수 있으나 5초 데이터는 알 수 없습니다.

:::note

<Cmdname sid="time" className="uitext" /> 옵션 이용 방법에 대한 자세한 내용은 [다음 문서](usage-ui#timeselector)를 참조하세요.

:::

</InDoc>

<InDoc product="mssql,mssql-v1,tibero,db2">

1. 화면 상단의 <Cmdname sid="time" className="uitext" />에서 조회하려는 날짜를 선택와 시간을 설정하세요.

1. 모니터링할 인스턴스를 선택하세요. 

선택한 인스턴스에서 설정한 시간 동안 발생한 잠금(Lock) 현황을 확인할 수 있습니다.

만약 설정된 시간 동안 잠금(Lock)이 발생했다면, <UI>Lock Wait Sessions</UI> 그래프와 하단의 테이블에서 특정 시간대에 잠금이 집중되는지, 또는 특정 세션이 지속적으로 잠금을 유발하는지 등을 분석할 수 있습니다.

:::note

* 차트에서 3시간 이내로 드래그해서 5초 단위의 데이터를 조회할 수 있습니다. 다만 5초 단위의 데이터는 최근 한 달 범위에서만 조회할 수 있습니다. 한 달 이전의 데이터는 5분 요약 데이터로만 볼 수 있습니다. 예를 들어, 40일 전의 락 트릭 데이터를 드래그(드릴다운)해서 5분 요약 데이터를 조회할 수 있으나 5초 데이터는 알 수 없습니다.

* <Cmdname sid="time" className="uitext" /> 옵션 이용 방법에 대한 자세한 내용은 [다음 문서](usage-ui#timeselector)를 참조하세요.

:::

</InDoc>

<Title hashid="lockwaitsessions" level={props.level+1}><UI>Lock Wait Sessions</UI></Title>

***Lock Wait Sessions***는 락 대기 세션의 정보를 분석할 수 있는 기능입니다. 조회 기간에 따라 락 대기 세션 데이터를 3시간 이상 조회 시 5분 간격으로, 3시간 미만 조회 시 5초 간격으로 제공합니다. 또한 차트를 드래그하여 시간 범위를 유동적으로 조정할 수 있습니다.

<Title hashid="1minlocktrend" level={props.level+1}><UI>1-Min Lock Trends</UI></Title>

***Lock Wait Sessions***에서 특정 시간대를 클릭하면, 해당 시간 기준으로 15분 전부터 15분 후까지의 총 30분 동안의 락 발생 현황을 시각화하여 표시합니다. 이를 통해 30분 단위로 락 발생 트렌드를 효과적으로 분석할 수 있습니다. 

:::note 

***Total Locks***는 해당 시간대에 발생한 락의 총 개수를 의미하며, ***Max Locks***는 해당 시간대 동안 발생한 최대 락 개수를 의미합니다.

:::

<Title hashid="selecttimelocktree" level={props.level+1}>시간 조회</Title>

***Lock Wait Sessions***에서 클릭한 시간에 발생한 Max Lock을 기준으로 ***1-Min Lock Trends***와 ***Lock Tree*** 테이블 내 시간을 적용하여 다음과 같이 선택한 시간 내에서 발생한 락의 개수를 확인할 수 있습니다. 

![시간 조회1](/img/db-lock-tree-1-min-lock-trends2.png)

***Lock Wait Sessions***는 그대로 두고 ***1-Min Lock Trends*** 차트에서 다른 시간대의 바를 클릭한 경우, 해당 분의 ***Max Lock***을 가진 초로 ***Lock Tree*** 테이블에 시간 범위가 동기화됩니다. 이를 통해 시간대를 변경할 때 ***Lock Tree*** 테이블에서 반영된 정보를 확인할 수 있습니다.

![시간 조회2](/img/db-lock-tree-1-min-lock-trends3.png)

<Title hashid="lock5mins" level={props.level+2}>5분 팩 (3시간 이상 조회 시)</Title>

***Lock Wait Sessions***에서 클릭한 시간에 발생한 Max Lock을 기준으로 ***1-Min Lock Trends***와 ***Lock Tree*** 테이블 내 시간을 적용합니다. `07:15:00` 시점을 클릭한 경우, `07:15:00~07:20:00`까지의 데이터가 포함되어 차트에서 바의 색상이 진하게 표시됩니다.

![5분 팩 조회](/img/db-lock-tree-1-min-lock-trends-5min.png)

{/* ![1-Min Lock Trends](/img/db-lock-tree-1-min-lock-trends1.png) */}

<Title hashid="lock5secs" level={props.level+2}>5초 팩 (3시간 미만 조회 시)</Title>

***Lock Wait Sessions***에서 클릭한 시간으로 ***1-Min Lock Trends***와 ***Lock Tree*** 테이블 내 시간이 동기화됩니다. 짧은 시간 간격의 락 상황을 분석할 때 유용합니다.

![5초 팩 조회](/img/db-lock-tree-1-min-lock-trends-5sec.png)
