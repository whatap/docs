<Title hashid="query-details" level={props.level}>SQL 상세 정보 확인하기</Title>

<InDoc pages="instance-monitoring,multi-instance-monitoring">

현재 수행 중인 세션의 SQL 쿼리 정보를 확인하려면 <Cmdname sid="active_sessions" className="uitext" /> 섹션의 **query**(또는 **sql_text**) 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="analysis-compare-top-sql">

자세한 SQL 정보를 확인하려면 SQL 순위 테이블의 **query** 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="slow-query">

현재 수행 중인 세션의 SQL 쿼리 정보를 확인하려면 **Slow Query List** 섹션의 **SQL** 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="analysis-sql">

SQL 목록에서 **query** 컬럼 항목을 선택하면 <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<Cmdname sid="BTN06225" className="uitext" />**→** 버튼을 클릭하면 해당 SQL 쿼리문과 관련한 통계 정보를 확인할 수 있는 <Cmdname sid="statistics_sql" className="uitext" />로 이동할 수 있습니다.

<InDoc product="oracle-pro,oracle"><ImgLang img="db-sql-details-oracle-pro.png" desc="SQL 상세" /></InDoc>

<InDoc product="postgresql,mysql"><ImgLang img="db-sql-details-postgresql.png" desc="SQL 상세" /></InDoc>

<InDoc product="mssql"><ImgLang img="db-sql-details-mssql.png" desc="SQL 상세" /></InDoc>

<InDoc product="db2,sapase"><ImgLang img="db-sql-details-db2.png" desc="SQL 상세" /></InDoc>

<Xclude product="postgresql,mysql,oracle-pro,oracle,mssql,db2,sapase"><ImgLang img="db-sql-details-common.png" desc="SQL 상세" /></Xclude>

<InDoc product='postgresql,mysql,altibase,cubrid,mssql,db2'>

* **Default Bind**: 쿼리 문장에서 변수로 설정된 부분을 기본값으로 바인딩할 수 있습니다.

* **Reset Bind**: 바인딩된 기본값을 해제하고 변수를 확인할 수 있습니다.

* **Formatting**: SQL 쿼리문에 들여쓰기 및 포맷팅을 적용해 가독성을 높일 수 있습니다.

</InDoc>

<InDoc product="altibase,cubrid,mssql">

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

</InDoc>

<InDoc product='postgresql,mysql'>

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

  * **Text**: 텍스트 형식으로 플랜 정보를 확인할 수 있습니다.

  * **JSON**: Json 형식으로 플랜 정보를 조회하면 병목이 발생하는 지점을 빠르게 확인할 수 있습니다.

  :::note

  **JSON** 형식으로 플랜 정보를 조회하는 기능은 DBX 에이전트 1.6.12 버전 이상에서만 지원합니다.

  :::

</InDoc>

<InDoc product='mysql'>

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

  * **Text**: 텍스트 형식으로 플랜 정보를 확인할 수 있습니다.

  * **JSON**: Json 형식으로 플랜 정보를 조회하면 병목이 발생하는 지점을 빠르게 확인할 수 있습니다.

  :::note

  **JSON** 형식으로 플랜 정보를 조회하는 기능은 DBX 에이전트 1.6.15 버전 이상에서만 지원합니다.

  :::

</InDoc>

<InDoc product='oracle-pro,oracle'>

* **Runtime Plan**: 선택된 SQL 쿼리의 실행 계획과 런타임 정보를 제공합니다. 실행 횟수, 평균 실행 시간, 평균 물리적 읽기 등 세부 정보를 제공합니다.

* **Explain Plan**: 옵티마이저가 예측한 실행 계획을 보여줍니다. 비용, 작업, 객체 이름, 카디널리티 등의 정보를 제공합니다.

* **Plan History**: 데이터베이스에서 실행된 SQL 쿼리의 실행 계획에 대한 이력을 확인할 수 있습니다.

* **Bind Capture**: 데이터베이스에서 실행된 SQL 쿼리에 사용된 바인드 변수의 값을 확인할 수 있습니다. 이를 통해 쿼리 실행의 실제 내용을 확인할 수 있습니다.

  :::note

  실시간 실행된 bind 값이 아닌 데이터베이스에 캡처된 값(`v$sql_bind_capture`)입니다. 건수가 많으면 100개까지 표시합니다.

  :::

</InDoc>

<InDoc product='postgresql,mysql'>

:::tip

**JSON** 형식으로 플랜 정보를 조회한 상태에서 table 또는 index 항목을 선택하면 테이블의 **column**, **index** 구성을 확인할 수 있는 **Object detail** 창이 나타납니다.

<ImgLang img='db-sql-objectdetail-pg.png' desc='Object detail' />

이 기능은 DBX 에이전트 1.6.15 버전 이상에서 지원합니다. 데이터베이스 권한과 관련한 설정은 [다음 문서](install-agent#uid)를 참조하세요.

:::

</InDoc>

<InDoc product='postgresql,mysql,oracle,oracle-pro,mssql'>

#### AI 튜닝 가이드 

AI 튜닝 가이드는 SQL 쿼리, Plan, 통계 정보를 분석하여 성능 문제를 진단하고, 최적화 방안을 제시하는 기능입니다. 개발자와 DBA가 병목 원인을 빠르게 파악하고, 효율적인 SQL로 성능을 개선할 수 있도록 지원합니다.

:::caution
**사용 조건 및 유의 사항**

**PostgreSQL, MySQL, SQL Server**는 Plan 조회가 필수입니다.  
Plan을 조회하지 않으면 AI 튜닝 가이드 아이콘이 ![비활성 AI 튜닝 가이드 아이콘](/img/ico-ai-tuning-icon-disabled.svg)(비활성화) 상태로 표시되며, 기능을 사용할 수 없습니다.

* AI가 생성하는 결과는 자동 분석에 기반하며, 정확도가 100%는 아님을 유의하시기 바랍니다.

:::

1. 분석 및 진단할 SQL을 클릭해 <Cmdname sid="TTL06224" className="uitext" /> 화면으로 이동합니다.

1. <Cmdname sid="TTL06224" className="uitext" /> 화면의 오른쪽 아래 AI 튜닝 가이드 아이콘 ![AI 튜닝 가이드 아이콘](/img/ico-ai-tuning-icon.svg)을 클릭해 AI 분석을 시작합니다.

1. AI 분석 결과를 확인합니다. 

    | 결과 항목 | 설명 |
    | :---: | --- |
    | 쿼리 플랜 및 요약 | 쿼리의 목적과 실행 요약 <br /> - 실행 횟수, 누적 실행 시간, 데이터베이스 전체 부하 비중을 분석해 해당 SQL이 시스템 성능에 미치는 영향 평가 |
    | 성능 분석 | 분석 결과를 종합해 성능 점수와 진단 결과 제공 <br /> - CPU 사용률, 디스크 사용률, 캐시 적중률, 대기 시간 등 쿼리 수행 과정의 세부 리소스 사용량을 분석해 병목이 발생한 구간을 시각적으로 보여줌 |
    | 발견된 주요 이슈 | 주요 이슈 요약 제공 |
    | 최적화 권장 사항 | 이슈에 따른 최적화된 쿼리 제안 |

</InDoc>