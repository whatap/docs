<Title hashid="query-details" level={props.level}>SQL 상세 정보 확인하기</Title>

<InDoc pages="instance-monitoring,multi-instance-monitoring">

현재 수행 중인 세션의 SQL 쿼리 정보를 확인하려면 <Cmdname sid="active_sessions" className="uitext" /> 섹션의 **query**(또는 **sql_text**) 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="analysis-compare-top-sql">

자세한 SQL 정보를 확인하려면 SQL 순위 테이블의 **query** 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="slow-query">

현재 수행 중인 세션의 SQL 쿼리 정보를 확인하려면 **Slow Query List** 섹션의 **SQL** 컬럼 항목을 선택하세요. <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<InDoc pages="analysis-sql">

SQL 목록에서 **query** 컬럼 항목을 선택하면 <Cmdname sid="TTL06224" className="uitext" /> 창이 나타납니다. SQL 쿼리문과 Plan 정보를 확인할 수 있습니다.

</InDoc>

<Cmdname sid="BTN06225" className="uitext" />**→** 버튼을 클릭하면 해당 SQL 쿼리문과 관련한 통계 정보를 확인할 수 있는 <Cmdname sid="statistics_sql" className="uitext" />로 이동할 수 있습니다.

<InDoc product="oracle-pro,oracle"><ImgLang img="db-sql-details-oracle-pro.png" desc="SQL 상세" /></InDoc>

<InDoc product="postgresql,mysql"><ImgLang img="db-sql-details-postgresql.png" desc="SQL 상세" /></InDoc>

<InDoc product="mssql"><ImgLang img="db-sql-details-mssql.png" desc="SQL 상세" /></InDoc>

<InDoc product="db2,sapase"><ImgLang img="db-sql-details-db2.png" desc="SQL 상세" /></InDoc>

<Xclude product="postgresql,mysql,oracle-pro,oracle,mssql,db2,sapase"><ImgLang img="db-sql-details-common.png" desc="SQL 상세" /></Xclude>

<InDoc product='postgresql,mysql,altibase,cubrid,mssql,db2'>

* **Default Bind**: 쿼리 문장에서 변수로 설정된 부분을 기본값으로 바인딩할 수 있습니다.

* **Reset Bind**: 바인딩된 기본값을 해제하고 변수를 확인할 수 있습니다.

* **Formatting**: SQL 쿼리문에 들여쓰기 및 포맷팅을 적용해 가독성을 높일 수 있습니다.

</InDoc>

<InDoc product="altibase,cubrid,mssql">

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

</InDoc>

<InDoc product='postgresql,mysql'>

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

  * **Text**: 텍스트 형식으로 플랜 정보를 확인할 수 있습니다.

  * **JSON**: Json 형식으로 플랜 정보를 조회하면 병목이 발생하는 지점을 빠르게 확인할 수 있습니다.

  :::note

  **JSON** 형식으로 플랜 정보를 조회하는 기능은 DBX 에이전트 1.6.12 버전 이상에서만 지원합니다.

  :::

</InDoc>

<InDoc product='mysql'>

* **Plan**: Plan 정보를 확인하려면 **DB Name**, **User Name**, **Password**를 입력하고 ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

  * **Text**: 텍스트 형식으로 플랜 정보를 확인할 수 있습니다.

  * **JSON**: Json 형식으로 플랜 정보를 조회하면 병목이 발생하는 지점을 빠르게 확인할 수 있습니다.

  :::note

  **JSON** 형식으로 플랜 정보를 조회하는 기능은 DBX 에이전트 1.6.15 버전 이상에서만 지원합니다.

  :::

</InDoc>

<InDoc product='oracle-pro,oracle'>

* **Runtime Plan**: 선택된 SQL 쿼리의 실행 계획과 런타임 정보를 제공합니다. 실행 횟수, 평균 실행 시간, 평균 물리적 읽기 등 세부 정보를 제공합니다.

* **Explain Plan**: 옵티마이저가 예측한 실행 계획을 보여줍니다. 비용, 작업, 객체 이름, 카디널리티 등의 정보를 제공합니다.

* **Plan History**: 데이터베이스에서 실행된 SQL 쿼리의 실행 계획에 대한 이력을 확인할 수 있습니다.

* **Bind Capture**: 데이터베이스에서 실행된 SQL 쿼리에 사용된 바인드 변수의 값을 확인할 수 있습니다. 이를 통해 쿼리 실행의 실제 내용을 확인할 수 있습니다.

  :::note

  실시간 실행된 bind 값이 아닌 데이터베이스에 캡처된 값(`v$sql_bind_capture`)입니다. 건수가 많으면 100개까지 표시합니다.

  :::

</InDoc>

<InDoc product='postgresql,mysql'>

:::tip

**JSON** 형식으로 플랜 정보를 조회한 상태에서 table 또는 index 항목을 선택하면 테이블의 **column**, **index** 구성을 확인할 수 있는 **Object detail** 창이 나타납니다.

<ImgLang img='db-sql-objectdetail-pg.png' desc='Object detail' />

이 기능은 DBX 에이전트 1.6.15 버전 이상에서 지원합니다. 데이터베이스 권한과 관련한 설정은 [다음 문서](install-agent#uid)를 참조하세요.

:::

</InDoc>

<InDoc product='postgresql,mysql,oracle,oracle-pro,mssql'>

#### AI 튜닝 가이드

AI 튜닝 가이드는 AI가 SQL 쿼리, 실행 계획(Plan), 통계 정보를 분석하여 성능 문제를 진단하고 최적화 가이드를 제공하는 기능입니다.

**SQL 상세** 화면 하단에 위치한 튜닝 가이드 아이콘을 클릭하면 AI 분석이 시작됩니다. 

1. 데이터베이스 모니터링 화면에서 진단할 SQL을 선택합니다.

1. SQL 상세 화면 오른쪽 하단에 있는 튜닝 가이드 아이콘을 클릭합니다.

1. AI가 해당 SQL의 실행 정보를 분석하여 다음 항목을 제공합니다.

:::note

AI가 생성하는 결과는 자동 분석에 기반하며, 정확도가 100%는 아님을 유의하시기 바랍니다.

:::

AI 분석 결과 주요 항목

쿼리 및 플랜 요약

쿼리 목적, 실행 횟수, 누적 실행 시간, 전체 DB 부하 비중을 요약하여 쿼리 영향도를 평가합니다.

비효율 구간 탐지

실행 계획을 분석해 테이블 전체 스캔, 인덱스 미사용, 불필요한 조건 처리 등 성능 저하 원인을 식별합니다.

성능 분석 점수

CPU, 디스크, 캐시 적중률, 대기 시간 등 리소스 사용률을 기반으로 성능 점수(100점 만점 기준)를 제공합니다.

병목이 발생한 구간을 시각적으로 표시해 원인 파악을 돕습니다.

주요 이슈 및 개선 제안

AI가 자동으로 주요 문제를 요약하고, 인덱스 추가, 조건문 개선, 통계 갱신 등 구체적인 튜닝 방향을 제시합니다.

예상 효과 제공

제안된 개선안을 적용했을 때의 예상 실행 시간 단축 비율도 함께 제공하여, 튜닝 전후의 효과를 예측할 수 있습니다.


</InDoc>