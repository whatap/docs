홈 화면 &gt; 프로젝트 선택 &gt; <Cmdname sid="laboratory" className="uitext" /> &gt; **Top SQL**

**TOP SQL**은 기존 SQL 통계 메뉴의 기능을 확장해 긴 기간 동안 데이터를 조회하고 분석할 수 있습니다. 최대 30일~최소 1분 단위로 조회할 수 있으며, 분석 지표를 탭 형태로 제공해 한눈에 볼 수 있습니다. 또한, 추이 차트를 추가하여 특정 시간의 SQL 발생 패턴을 쉽게 파악할 수 있습니다.

## 기본 화면 안내

<ImgLang img='db-top-sql-stat.png' desc='Top SQL' />

1. **시간**에서 데이터를 조회할 시간과 날짜를 선택하세요. 

    - 녹색 버튼을 클릭해 조회 시간을 선택하거나 날짜와 시간 텍스트 영역을 클릭하면 날짜와 시간을 옵션으로 선택할 수 있습니다.
    
1. **인스턴스**에서 데이터를 조회할 대상을 선택하세요.

1. **필터** 조건을 추가하세요. **필드**에서 **필터**에 추가할 컬럼을 쉽게 검색하고 추가할 수 있습니다. 
    
1. <Cmdname sid="TTL07773" className="uitext" />에서 테이블에 표시할 건수를 설정하세요.

    - 데이터는 10~100건까지 테이블에 표시합니다.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 클릭하세요.

    - 조회한 내용을 CSV 형식의 파일로 다운받으려면 ![다운로드 아이콘](/img/ico-download.svg) 버튼을 클릭하세요.

    - 테이블 헤더의 각 컬럼을 클릭하면 선택한 컬럼을 기준으로 목록을 정렬할 수 있습니다.

:::note

<Cmdname sid="time" className="uitext" /> 옵션 이용 방법은 [다음 문서](usage-ui#timeselector)를 참고하세요.

:::

### 필드 조건 추가하기

**필드**에서 필드명을 확인하고, 검색해 원하는 조건의 데이터를 조회할 수 있습니다. 

* 필드 검색 기능을 통해 원하는 필드를 빠르게 찾을 수 있습니다.

* 필드 유형은 ![문자 아이콘](/img/ico-string.svg) (문자 타입), ![필드 아이콘](/img/ico-field.svg) (숫자 타입) 아이콘으로 구분할 수 있습니다.

1. 필드 목록에서 원하는 항목에 마우스를 올리면, 해당 필드의 데이터 타입에 따라 조건 아이콘이 나타납니다. 

    * `String`(문자) 타입 필드 조건: `=`(포함), `!=`(미포함)

    * `Number`(숫자) 타입 필드 조건: `==`(같음), `≥`(보다 크거나 같음), `≤`(보다 작거나 같음)

2. 원하는 조건 아이콘을 클릭한 후, 값을 입력합니다. 

3. **적용** 버튼을 클릭해 필드 조건을 추가합니다.

### Trends 차트 확인하기 {#trends-chart}

<InDoc product='mysql,oracle,oracle-pro'><ProdImg img='db-top-sql-trends-chart.png' desc='Top SQL' /></InDoc>

**Trends** 차트의 SQL 통계 데이터 수집 주기와 데이터 조회 범위는 아래 기준에 따라 다릅니다. 

* **3시간 이하**
    * **SQL 통계 데이터 수집 주기 옵션이 1분으로 설정된 경우**: 1분 간격으로 데이터 수집
    * **SQL 통계 데이터 수집 주기 옵션이 1분으로 설정되지 않은 경우**: 5분 간격으로 데이터 수집
* **1일 이하**: 5분 간격으로 데이터 수집
* **30일 이하**: 1시간 간격으로 데이터 수집  

:::note

**SQL 통계 데이터 수집 주기 옵션 설정하기(차트 인터벌)**

1분 단위의 서머리 데이터를 표시하려면 에이전트 버전과 에이전트 설정을 확인해야 합니다.

1. 에이전트 버전 2.4.5 이상으로 업데이트하세요.

1. whatap.conf 파일에 `sqlstat_send_interval = 1` 설정을 추가하세요.

:::