
<Xclude product="npm">

홈 화면 &gt; 프로젝트 선택 &gt; <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> &gt; <Cmdname sid="metrics" className="uitext" /> 탭 선택

</Xclude>

<InDoc product="npm">

홈 화면 &gt; 프로젝트 선택 &gt; <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" />

</InDoc>

## 메트릭스 이벤트란?

<Xclude product='npm,nms'>

메트릭스 이벤트는 기본 이벤트(애플리케이션 이벤트, 서버 이벤트 등)보다 구체적이고 복잡한 이벤트를 설정할 때 사용합니다. 프로젝트에서 실시간으로 수집 중인 메트릭스 데이터를 기반으로 이벤트를 설정할 수 있습니다. 사용에 따라 두 가지 설정 방법 중 하나를 선택해 이벤트를 설정할 수 있습니다.

- 메트릭스 이벤트
- 복합 메트릭스 이벤트

</Xclude>

<InDoc product='npm,nms'>

메트릭스 이벤트는 기본 이벤트(애플리케이션 이벤트, 서버 이벤트 등)보다 구체적이고 복잡한 이벤트를 설정할 때 사용합니다. 프로젝트에서 실시간으로 수집 중인 메트릭스 데이터를 기반으로 이벤트를 설정할 수 있습니다.

</InDoc>

<Xclude product="amazon-cloudwatch,amazon-ecs,azure,ncloud,oracle-cloud,nms">

:::note

* 메트릭스에 대한 자세한 내용은 [다음 문서](metrics-intro)를 참조하세요.

* 새로운 UI를 적용하여 사용자 편의성이 강화된 <Cmdname sid="side_eventSetting" className="uitext" /> <code class="newfunc">New</code>  메뉴에서 메트릭스 이벤트를 추가할 수 있습니다. 자세한 내용은 [다음 문서](metric-warning-notice-new)를 참조하세요.

* <Cmdname sid="sms_alert_settings" className="b500" /> 권한이 있는 멤버만 이용할 수 있습니다. 멤버 권한에 대한 자세한 설명은 [다음 문서](../project/project-structure#project-auth)를 참조하세요.

:::

</Xclude>

<InDoc product="amazon-cloudwatch,amazon-ecs,azure,ncloud,oracle-cloud">

:::note

메트릭스에 대한 자세한 내용은 [다음 문서](metrics-intro)를 참조하세요.

:::

</InDoc>

{/* nms(Network Management System)의 경우 임시 */}

<InDoc product="nms">

:::note

<Cmdname sid="sms_alert_settings" className="b500" /> 권한이 있는 멤버만 이용할 수 있습니다. 멤버 권한에 대한 자세한 설명은 [다음 문서](../project/project-structure#project-auth)를 참조하세요.

:::

</InDoc>

## 메트릭스 이벤트

<Xclude product="npm">

<Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> 메뉴에서 화면 위에 <Cmdname sid="metrics" className="uitext" />를 선택하세요. 화면 오른쪽 위에 <Cmdname sid="add_notification" className="uitext" />를 선택하세요. <Cmdname sid="metrics_event" className="uitext" /> 창이 나타납니다.

</Xclude>

<InDoc product="npm">

<Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> 메뉴에서 화면 오른쪽 위에 <Cmdname sid="add_notification" className="uitext" />를 선택하세요. <Cmdname sid="metrics_event" className="uitext" /> 창이 나타납니다.

</InDoc>

<ImgLang img='set-events-metrics.png' desc='메트릭스 이벤트' />

<InDoc product='kubernetes'>

:::note

메트릭스에 이벤트 템플릿에 대한 자세한 내용은 [다음 문서](#template)를 참조하세요.

:::

</InDoc>

### 기본 정보 입력{#basic-info}

* <Cmdname sid="event_name" className="uitext" />: 추가하려는 이벤트 이름을 입력하세요.

* <Cmdname sid="enable_events" className="uitext" />: 이벤트를 활성화 여부를 선택하세요.

* <Cmdname sid="template" className="uitext" />: 만들어진 템플릿을 선택해 빠르고 쉽게 이벤트를 설정할 수 있습니다. 템플릿을 사용하지 않을 경우 <Cmdname sid="metrics_option_disabled" className="uitext" />을 선택하세요.

  <InDoc product='java,php,nodejs,python,golang,dotnet,postgresql,browser,npm'>

  :::note

  템플릿 목록에 대한 자세한 내용은 [다음 문서](#template)를 참조하세요.

  :::

  </InDoc>

* <Cmdname sid="category" className="uitext" />: 메트릭스 데이터를 구분하는 단위입니다. 메트릭스 이벤트 설정 시 필수 선택 값입니다.
  
  <ImgLang img='set-event-select-category.png' desc='메트릭스 이벤트 - 카테고리' />

  * <Cmdname sid="category" className="uitext" /> 선택 옵션에는 <LinkImage img="number-01.png" className="ico" /> <Cmdname sid="name" className="uitext" />과 <LinkImage img="number-02.png" className="ico" /> 데이터 수집 간격, <LinkImage img="number-03.png" className="ico" /> <Cmdname sid="key" className="uitext" /> 정보를 표시합니다. 이벤트 설정 시 해당 카테고리의 키 값을 사용합니다.

  * <Cmdname sid="category" className="uitext" />는 최근 3시간 범위 내 프로젝트에서 수집 중인 메트릭스 데이터를 조회해 목록에 표시합니다. <Cmdname sid="category" className="uitext" /> 선택 옵션에 수집 간격이 표시되지 않는 경우 <Cmdname sid="enter_category_self" className="uitext" /> 옵션을 선택해 카테고리 키를 입력할 수 있습니다.

* <Cmdname sid="level" className="uitext" />

  * 이벤트 발생 시 경고 수준을 나타냅니다. <span class='vslow'>Critical</span>, <span class='slow'>Warning</span>, <span style={{color:'#757575'}}>Info</span> 수준으로 나눕니다. <span class='vslow'>Critical</span>, <span class='slow'>Warning</span> 레벨 설정 시 <Cmdname sid="CNT08320" className="uitext" /> 선택 옵션이 활성화됩니다.

  * <Cmdname sid="CNT08320" className="uitext" /><ScrollToLink anchor='scrollTo-resolve-event' />: 이벤트 항목 중 발생한 <Cmdname sid="CNT08320" className="uitext" /> 송신 여부를 선택할 수 있습니다. 토글 버튼을 선택해 기능을 켜거나 끌 수 있습니다.

* <Cmdname sid="message" className="uitext" />

  * 이벤트 발생 시 출력하는 알림 메시지를 입력합니다. <code>&#36;&#123;Tag&#125;</code> 또는 <code>&#36;&#123;Field&#125;</code> 입력으로 메시지에 변수를 적용할 수 있습니다. 변수에 입력할 키는 선택한 메트릭스 데이터 <Cmdname sid="category" className="uitext" />에 포함된 값이여야 합니다. <Cmdname sid="tag_count" className="uitext" /> 메뉴에서 입력할 수 있는 태그 또는 필드키를 확인할 수 있습니다.

    <ImgLang img='event-config-message-example.png' desc='Message example' />

  * ![시간 아이콘](/img/ico-timing.svg) 버튼을 클릭하면 이전에 입력한 메시지 기록을 확인할 수 있습니다.

* <Cmdname sid="alert_test" className="uitext" />

  필수 항목인 <Cmdname sid="event_name" className="uitext" />, <Cmdname sid="category" className="uitext" />, <Cmdname sid="level" className="uitext" />, <Cmdname sid="message" className="uitext" /> 정보를 기준으로 알림을 발생시켜 메시지를 점검하는 기능입니다.

  :::note

  * 테스트 중에는 실제 메트릭스 값이나 변수에 대한 치환 기능이 작동하지 않습니다. 

  * <Cmdname sid="TTL07415" className="uitext" /> 옵션에서 수신자 태그가 설정된 사용자에게만 테스트 알림을 보냅니다. <Cmdname sid="ITM07419" className="uitext" />을 선택했다면 모든 사용자에게 테스트 알림을 보냅니다.

  * 수신 테스트를 이용하려면 필수 항목(<Cmdname sid="event_name" className="uitext" />, <Cmdname sid="category" className="uitext" />, <Cmdname sid="level" className="uitext" />, <Cmdname sid="message" className="uitext" />)에 값을 입력하거나 선택해야 합니다.

  :::

* <Cmdname sid="metrics_event_rules" className="uitext" /> <ScrollToLink anchor='eventcondition' />

  <ImgLang img='set-event-condition.png' desc='이벤트 발생 조건' />

  ![지시선 4](/img/number-04.png) 필드, ![지시선 5](/img/number-05.png) 연산자 선택, ![지시선 6](/img/number-06.png) 임계값을 입력해 이벤트 발생 조건을 설정하세요.

* <Cmdname sid="alert_object_filtering" className="uitext" />

  <ImgLang img='set-event-filtering.png' desc='이벤트 대상 필터링' />

  ![지시선 7](/img/number-07.png) 태그, ![지시선 8](/img/number-08.png) 연산자 선택, ![지시선 9](/img/number-09.png) 필터링값을 입력해 대상을 필터링합니다. 입력값이 없을 경우 전체 에이전트를 대상으로 경고 알림을 보냅니다.

:::note

* <Cmdname sid="metrics_event_rules" className="uitext" />과 <Cmdname sid="alert_object_filtering" className="uitext" />에서 사용할 수 있는 기본 문법과 연산자 목록은 <Link to="#condition-guide">다음 문서</Link>를 참조하세요.

* <Cmdname sid="metrics_event_rules" className="uitext" />과 <Cmdname sid="alert_object_filtering" className="uitext" /> 옵션은 <Cmdname sid="metrics_rule_select" className="uitext" /> 또는 <Cmdname sid="metrics_rule_direct" className="uitext" /> 옵션을 선택할 수 있습니다.

* 이벤트 설정 내용이 저장된 이후에는 해당 옵션값은 <Cmdname sid="metrics_rule_direct" className="uitext" /> 옵션으로 관리합니다. 이후 <Cmdname sid="metrics_rule_select" className="uitext" /> 옵션으로 전환하면 옵션값이 초기화될 수 있습니다.

* 이벤트 발생 조건과 대상 입력 시 특수 문자(<code>~!@#$%^&*()_+=-[]`</code>)를 포함하거나 숫자로 시작하는 필드명을 입력하면 오류가 발생할 수 있습니다. 이런 경우 <Cmdname sid="metrics_rule_direct" className="uitext" /> 옵션을 선택한 다음 예시와 같이 중괄호(<code>\$\{\}</code>)로 묶어서 입력하세요.

  ```text
  ${4xxErrorType} == '401'
  ```

:::

### 이벤트 수신 설정 {#set-receive-event}

<ImgLang img='set-event-receive.png' desc='이벤트 수신 설정' />

* <Cmdname sid="number_of_event" className="uitext" />: 선택한 시간 동안 <Cmdname sid="metrics_event_rules" className="uitext" />에서 설정한 이벤트가 입력 횟수만큼 발생하면 경고 알림을 보냅니다.

  :::note

  * 선택 시간을 <Cmdname sid="metrics_option_disabled" className="uitext" />으로 설정하면 입력한 횟수만큼 연속 발생할 때 알림을 보냅니다.
  * <Cmdname sid="CNT08320" className="uitext" /> 옵션을 활성화한 경우 선택 시간은 <Cmdname sid="metrics_option_disabled" className="uitext" />으로 선택할 것을 권장합니다.
  * <Cmdname sid="category" className="uitext" /> 옵션에서 선택한 항목의 수집 주기는 5초입니다.
  
  :::

* <Cmdname sid="event_pause" className="uitext" /><ScrollToLink anchor='scrollTo-event-pause' />: 과도한 경고 알림 발생을 방지할 수 있는 옵션입니다. 첫번째 경고 알림 이후 선택한 시간 동안 경고 알림을 보내지 않습니다. 또한 <Cmdname sid="event_history" className="uitext" /> 메뉴에 기록되지 않습니다.

* <Cmdname sid="related_category" className="uitext" />: 관련 카테고리를 5개까지 설정하고 알림 조회 시 참조합니다.

* <Cmdname sid="event_tag" className="uitext" />: 이벤트 수신 태그를 선택하면 해당 태그를 가진 프로젝트 멤버와 3rd-party 플러그인에 알림을 전송할 수 있습니다. 이벤트 수신 태그를 선택하지 않으면 프로젝트 전체 멤버에게 경고 알림을 보냅니다.

  :::note

  <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_receive_configuration" className="uitext" /> 메뉴에서 프로젝트 멤버와 3rd-party 플러그인에 태그를 설정할 수 있습니다.
  
  :::

### 알림 규칙 테스트

<ImgLang img='set-event-test.png' desc='경고 알림 테스트' />

선택한 시간 동안 설정한 이벤트 조건을 실행해 몇 번의 경고 알림이 발생했는지 확인할 수 있습니다. <Cmdname sid="run" className="uitext" /> 버튼을 선택하면 오른쪽 상단에 알림 발생 건수 정보가 표시됩니다. <Cmdname sid="metrics_event_rules" className="uitext" />에서 선택한 필드와 임계치를 차트상에 표시합니다.

:::note

* <Cmdname sid="metrics_event_rules" className="uitext" />에 대한 자세한 내용은 [다음 문서](#eventcondition)를 참조하세요.

* <Cmdname sid="event_simulation_title" className="uitext" /> 기능은 최대 24시간 동안의 데이터를 기준으로 테스트할 수 있습니다.

:::