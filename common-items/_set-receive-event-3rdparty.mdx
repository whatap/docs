## 3rd 파티 플러그인 알림 추가하기 {#add3rdparty}

Slack, Telegram, Teams, Jandi, Webhook 등의 외부 애플리케이션을 통해 경고 알림을 받을 수 있습니다.

1. <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="eventNoti" className="uitext" /> 메뉴에서 <Cmdname sid="3rd_party_plugin" className="uitext" /> 섹션의 <Cmdname sid="adding" className="uitext" /> 버튼을 선택하세요.

1. 원하는 서비스를 선택하세요.

    <ImgLang img='set-event-3rd-party-plugin.png' desc='3rd 파티 플러그인 추가' />

1. 선택한 서비스의 화면 안내에 따라 설정을 진행하세요.

1. 모든 과정을 완료했다면 추가 버튼을 선택하세요.

:::note

와탭랩스의 지원 범위에 포함하지 않는 사내 메신저는 표준 Webhook, Webhook json을 통해 연동할 수 있습니다.

:::

다음 3rd 파티 플러그인 목록에서 사용하는 애플리케이션에 알맞는 알림 추가 방법을 확인하세요.

<details>

<summary>Slack</summary>

화면 아래에 <Cmdname sid="add_to_slack" className="uitext" /> 버튼을 클릭하면 Slack의 팀 및 채널에 **WhaTapNotiBot**을 등록할 수 있습니다.

<ImgLang img='3rdparty/set-event-3rd-party-plugin-add-slack.png' desc='Slack' />

</details>

<details>

<summary>Telegram</summary>

1. **Telegram**에서 **@WhaTapApmNotiBot**을 검색하세요.

    <ImgLang img='3rdparty/set-event-3rd-party-plugin-add-telegram.png' desc='Telegram' />

1. 알림을 받을 프로젝트의 액세스 키를 채팅창에 입력하세요.

    <ImgLang img='3rdparty/set-event-3rd-party-plugin-add-telegram-license.png' desc='Telegram' />

:::note

다음은 사용할 수 있는 명령어 목록입니다.

* `/help`: 명령어 목록 보기

* `/license`: 알림 받을 프로젝트의 액세스 키 입력

* `/remove`: 알림을 받지 않을 프로젝트 코드 입력

* `/list`: 현재 알림을 받고 있는 프로젝트 코드 보기

:::

</details>

<details>

<summary>Teams</summary>

1. 알림을 받을 채널의 **커넥터** 설정으로 이동하세요.

    <ImgLang img="3rdparty/management_event_new_teams_step_01.png" className="width-200" desc="Teams" />

1. **Webhook**을 추가하고 **구성** 버튼을 클릭하고 다음 단계로 넘어가세요.

    <ImgLang img="3rdparty/management_event_new_teams_step_02.png" className="width-600" desc="Teams" />

1. Webhook 이름을 입력하고 **만들기** 버튼을 클릭하세요.

    <ImgLang img="3rdparty/management_event_new_teams_step_03.png" className="width-600" desc="Teams" />

1. 생성한 Webhhok URL을 복사하세요.

    <ImgLang img="3rdparty/management_event_new_teams_step_04.png" className="width-600" desc="Teams" />

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Channel Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-teams.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

</details>

<details>

<summary>Teams Workflows</summary>

워크플로를 사용하려면 **Microsoft Teams**에 액세스할 수 있는 계정과 비즈니스 플랜 구독이 필요합니다.

1. **팀** 메뉴에서 더보기(...) 버튼을 선택한 후 **채널 추가**를 클릭하세요.

    <ImgLang img="3rdparty/teams_workflows_step_01.png" desc="Teams Workflows" />

1. 채널 이름과 설명을 입력하고 채널 유형을 **표준**으로 선택하세요.

    <ImgLang img="3rdparty/teams_workflows_step_02.png" desc="Teams Workflows" />

    :::note

    채널 유형을 **공유**로 선택하면 워크플로를 사용할 수 없으며, **비공개**를 선택하면 워크플로를 추가할 수 있지만 알림을 수신할 수 없습니다.

    :::

1. 생성한 채널에서 더보기(...) 버튼을 선택한 후 **워크플로**를 클릭하세요.

    <ImgLang img="3rdparty/teams_workflows_step_03.png" desc="Teams Workflows" />

1. **워크플로** 대화상자의 **워크플로**의 목록에서 **웹후크 요청이 수신되면 채널에 게시**를 선택 후, **추가 워크플로**를 클릭하세요.

    <ImgLang img="3rdparty/teams_workflows_step_04.png" desc="Teams Workflows" />

1. 이름과 연결 상태를 확인하 후, **다음** 버튼을 클릭하세요.

    <ImgLang img="3rdparty/teams_workflows_step_05.png" desc="Teams Workflows" />

1. 세부 정보를 확인한 후 **워크플로 추가** 버튼을 클릭하세요.

    <ImgLang img="3rdparty/teams_workflows_step_06.png" desc="Teams Workflows" />

1. 워크플로 추가를 완료했습니다. **생성된 주소**를 복사하세요.

    <ImgLang img="3rdparty/teams_workflows_step_07.png" desc="Teams Workflows" />

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Channel Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-teams.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

</details>

<details>

<summary>잔디(Jandi)</summary>

1. 알림을 받을 토픽 또는 채팅에서 **잔디 커넥트** 설정으로 이동하세요.

1. **커넥트 목록**에서 <b>Webhook 수신 (Incoming Webhook)</b> 항목에서 **연동하기** 버튼을 선택하세요.

    <ImgLang img="3rdparty/management_event_jandi_step_01.png" desc="Jandi" />

1. **연동하기** 탭에서 **연동 추가하기** 버튼을 선택하세요.

1. **Webhook URL 등록** 항목에 Webhook URL을 복사하세요.

    <ImgLang img="3rdparty/management_event_jandi_step_02.png" desc="Jandi" />

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Channel Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-teams.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

</details>

<details>

<summary>AlertNow</summary>

1. **AlerNow** 서비스를 접속한 다음 **Integration** 메뉴로 이동하세요.

    <ImgLang img="3rdparty/management_event_alertnow_step_01.png" desc="AlertNow" className="width-200" />

1. **Integration** 메뉴에서 **인티그레이션 생성** 버튼을 선택하세요.

    <ImgLang img="3rdparty/management_event_alertnow_step_02.png" desc="AlertNow" className="width-600" />

1. Integration 유형 중 **WhaTap**을 선택하세요.

    ![AlerNow](/img/3rdparty/management_event_alertnow_step_03.png)

1. **Integration 생성** 화면에서 이름 및 이름 지정 규칙을 설정하세요.

    <ImgLang img="3rdparty/management_event_alertnow_step_04.png" desc="AlertNow" className="width-600" />

1. **확인** 버튼을 선택하면 Integration이 생성됩니다.

1. 생성된 Integration 목록을 확인하고 생성된 Integration 항목을 선택하세요.

    <ImgLang img="3rdparty/management_event_alertnow_step_05.png" desc="AlertNow" className="width-600" />

1. 상세 화면에서 **URL** 항목 오른쪽에 복사하기 버튼을 선택해 URL을 복사하세요.

    <ImgLang img="3rdparty/management_event_alertnow_step_06.png" desc="AlertNow" className="width-600" />

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Channel Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-teams.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

</details>

<details>

<summary>Webhook</summary>

1. 알림을 받을 Webhook을 등록하세요. 등록한 URL에 POST Method로 알림의 `title`, `text`가 전송됩니다.

    ![Webhook](/img/3rdparty/set-event-3rd-party-plugin-add-webhook.png)

1. <UI>Webhook Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-webhook-options.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

</details>

<Xclude product="server">

<details>

<summary>Webhook JSON</summary>

1. 알림을 받을 Webhook을 등록하세요. 등록한 URL에 POST Method로 알림 데이터가 JSON 형태로 전송됩니다.

    ```json
    {
        "pcode": 1234,
        "projectName": "Sample project",
        "time": 1577840400000,
        "oid": 1234567890,
        "oname": "WAS-01", // Optional
        "title": "Alert Title",
        "message": "Sample warning message",
        "level": "Warning",
        "status": "on",
        "metricName": "cpu", // Optional
        "metricValue": "99.99", // Optional
        "metricThreshold": "90", // Optional
        "uuid": "ba5db108b788475c95195***********",
        "okind": "WAS-okind-01", // Optional
        "onode": "WAS-onode-01", // Optional
    }
    ```

1. <UI>Webhook Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-webhook-json-options.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

:::note

* 이벤트 상태(`status`)는 이벤트 발생(`on`), 이벤트 해소(`off`)로 구분할 수 있습니다.

* `level`은 `None`, `Info`, `Warning`, `Critical`로 구분합니다.

* Header 값을 추가하려면 <Cmdname sid="TTL06674" className="uitext" />를 선택하세요.

:::

</details>

</Xclude>

<InDoc product="server">

<details>

<summary>Webhook JSON</summary>

1. 알림을 받을 Webhook을 등록하세요. 등록한 URL에 POST Method로 알림 데이터가 JSON 형태로 전송됩니다.

    ```json
    {
        "pcode": 1234,
        "projectName": "Sample project",
        "time": 1577840400000,
        "oid": 1234567890,
        "oname": "WAS-01", // Optional
        "title": "Alert Title",
        "message": "Sample warning message",
        "level": "Warning",
        "status": "on",
        "metricName": "cpu", // Optional
        "metricValue": "99.99", // Optional
        "metricThreshold": "90", // Optional
        "uuid": "ba5db108b788475c95195***********",
        "okind": "WAS-okind-01", // Optional
        "onode": "WAS-onode-01", // Optional
        "serverAlertPolicyName": "Memory Alert" // Optional
    }
    ```

1. <UI>Webhook Name</UI>과 <UI>Webhook URL</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-webhook-json-options.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.

:::note

* 이벤트 상태(`status`)는 이벤트 발생(`on`), 이벤트 해소(`off`)로 구분할 수 있습니다.

* `level`은 `None`, `Info`, `Warning`, `Critical`로 구분합니다.

* Header 값을 추가하려면 <Cmdname sid="TTL06674" className="uitext" />를 선택하세요.

:::

</details>

</InDoc>

<details>

<summary>Opsgenie</summary>

1. **Teams** 메뉴에서 알림을 수신할 팀을 선택한 다음 **Integrations** 메뉴를 클릭하세요.

    ![Opsgenie](/img/3rdparty/management_event_opsgenie_step_01.png)

1. **Add Integration** 버튼을 선택하세요.

    ![Opsgenie](/img/3rdparty/management_event_opsgenie_step_02.png)

1. Integration 목록에서 'API'를 검색한 다음 선택하세요.

    ![Opsgenie](/img/3rdparty/management_event_opsgenie_step_03.png)

1. API 이름 및 Team을 할당하고 각 권한을 설정하세요.

    ![Opsgenie](/img/3rdparty/management_event_opsgenie_step_04.png)

1. **Save Integration** 버튼을 선택하세요.

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Name</UI>과 <UI>API Key</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-opsgenie-options.png" className="width-600" desc="등록" />

1. <Cmdname sid="BTN06673" className="uitext" /> 버튼을 선택하세요.


</details>

<details>

<summary>PagerDuty</summary>

1. [PagerDuty](https://www.pagerduty.com/) 계정에 등록하고 로그인했는지 확인하세요.

1. PagerDuty에서 **Services** &gt; **Service Directory** 메뉴로 진입해 **New Service** 버튼을 선택하세요.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_01.jpg)

1. Service 정보를 입력한 후 **Next** 버튼을 선택하세요.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_02.jpg)

1. Escalation Policy를 설정 후 **Next** 버튼을 선택합니다.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_03.jpg)

1. **Alert Grouping**과 **Transient Alerts** 항목을 설정한 후 **Next** 버튼을 선택하세요.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_04.jpg)

1. **Integrations**에서 **Event API V2**를 선택 후 **Create Service** 버튼을 클릭하세요.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_05.jpg)

1. 생성한 Service 화면에서 **Integration Name**과 **Integration Key** 값을 복사하세요.

    ![PagerDuty](https://preview.whatap.io/assets/assets/image/management_event_pagerduty_step_06.jpg)

1. 와탭 모니터링 서비스의 <Cmdname sid="TTL06656" className="uitext" /> 화면으로 돌아와 <UI>Integration Name</UI>과 <UI>Integration Key</UI> 항목을 입력하세요.

    <ImgLang img="3rdparty/set-event-3rd-party-plugin-add-pagerduty-options.png" className="width-600" desc="Register" />


:::note

메시지를 수신하지 못했거나 플러그인이 등록되지 않았다면 **Integration Name** 또는 **Integration Key**값이 올바른지 확인하세요.

:::

</details>