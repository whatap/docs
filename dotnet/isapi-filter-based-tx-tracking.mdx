---
id: isapi-filter-based-tx-tracking
title: ISAPI 필터 기반 트랜잭션 추적
description: ISAPI 필터 기반으로 트랜잭션 추적 기능을 적용하는 방법을 안내합니다.
keywords: [ .NET ]
---

와탭 .NET 에이전트는 IIS에서 동작하는 다양한 애플리케이션의 트랜잭션을 추적할 수 있도록 ISAPI 필터 기능을 제공합니다. 이를 통해 ASP, ASP.NET, CGI, ISAPI 확장 등 .NET 외 다양한 기술 기반의 요청까지 폭넓게 모니터링할 수 있습니다.

:::note 

**요구 사항**

ISAPI 필터 기능은 와탭 .NET 에이전트 v2.4.0 이상부터 지원합니다.

:::

## 설치

1. 기존 [에이전트 설치](/dotnet/install-agent) 안내대로 .NET 에이전트를 설치하세요. 

1. 에이전트 설치 후 *whatap_isapi_filter.dll* 파일을 대상 사이트의 루트 디렉터리에 복사하세요. 

    ```bash 
    C:..> copy "C:\Program Files\WhaTap .NET\whatap_isapi_filter.dll" C:\inetpub\yoursite
    ```

    * 필터 파일을 IIS의 웹 사이트가 운영되는 디렉터리 내에 복사할 경우 추가 설정이 필요하지 않습니다. 

    * 필터 파일은 반드시 웹 사이트가 운영되는 디렉터리 내에 존재하지 않아도 되지만, 해당 경로 및 파일에 **IIS_IUSRS** 그룹의 **읽기 및 실행 권한**이 부여되어야 합니다.

## ISAPI 필터 설정

ISAPI 필터는 **서버 전체** 또는 **개별 사이트** 단위로 적용할 수 있습니다.

### 서버 전체 필터 적용 

IIS에 호스팅된 모든 웹사이트의 요청에 대해 필터를 적용하려면 다음과 같이 설정하세요. 

<ImgLang img="dotnet-isapi-pic-001.png" desc="서버 전체 필터 적용" />

1. IIS 관리자를 실행하세요.

1. 왼쪽 트리에서 서버 노드를 선택하세요.

1. 가운데 영역에서 ISAPI 필터 아이콘을 더블 클릭하세요.

### 개별 사이트 필터 적용

개별 사이트의 트랜잭션을 필터링하려면 다음과 같이 설정하세요. 

<ImgLang img="dotnet-isapi-pic-002.png" desc="개별 사이트 필터 적용" />

1. IIS 관리자를 실행하세요.

1. 왼쪽 트리에서 대상 사이트를 선택하세요. 

1. 가운데 영역에서 ISAPI 필터 아이콘을 더블 클릭하세요. 

### 필터 항목 추가 

<ImgLang img="dotnet-isapi-pic-003.png" desc="필터 항목 추가" />

1. 오른쪽 작업창에서 추가 버튼을 클릭하세요. 

1. 필터 이름을 자유롭게 지정하세요.

1. *whatap_isapi_filter.dll* 파일을 찾아 선택하세요.

1. 확인 버튼을 클릭하세요. 

## ISAPI 필터가 동작하지 않을 경우

필터 설정 후에도 동작하지 않을 경우 **ISAPI 및 CGI 제한 설정**을 추가해야 할 수 있습니다.

<ImgLang img="dotnet-isapi-pic-004-2.png" desc="필터 미동작 sc" />

1. IIS 관리자에서 왼쪽 트리에서 서버를 선택하세요. 

1. 가운데 영역에서 ISAPI 및 CGI 제한 아이콘을 더블 클릭하세요. 

1. 오른쪽 작업창에서 추가 버튼을 클릭하세요. 

1. *whatap_isapi_filter.dll* 파일을 선택하세요. 

1. 항목 이름을 입력하세요. 

1. 확장 경로 실행 허용 체크 박스를 체크하세요. 

1. 확인 버튼을 클릭하세요. 