---
id: dpm-service-setup
title: 모니터링 서비스 구성
description: 와탭 데이터베이스 모니터링 서비스를 사용하기 위한 프로젝트 생성 및 액세스 키 확인 과정을 안내합니다.
keywords: [데이터베이스, 프로젝트, 액세스 키, 서비스 구성]
---

와탭 데이터베이스 모니터링 서비스를 사용하려면 [회원 가입](https://www.whatap.io/ko/signup/) 후 프로젝트를 생성하고 **액세스 키**를 발급받아야 합니다.  
이 과정은 모니터링 에이전트를 설치하기 위한 준비 단계입니다.  

회원 가입에 대한 자세한 내용은 [다음 문서](../account/account-manage)를 참고하세요.

import Createprojectv2 from "../getting-started/_create-project-v2.mdx";

<Createprojectv2 />

<Steps>

<Dbcreatemonitoringaccount />

## 액세스 키 확인 {#check-accesskey}

**액세스 키**는 와탭 서비스 활성화를 위한 고유 식별자입니다.  
<Cmdname sid="issue_project_access_key" className="uitext" /> 버튼을 클릭하면 **액세스 키**가 자동 발급되며,  
해당 키를 이용해 다음 단계의 에이전트 설치를 진행합니다.

:::note
프로젝트를 생성하면 자동으로 <Cmdname sid="agent_installation" className="uitext" /> 페이지로 이동합니다.  
만약 자동으로 이동하지 않는 경우, 왼쪽 메뉴에서  
<Cmdname sid="management" className="uitext" /> > <Cmdname sid="agent_installation" className="uitext" />를 선택하세요.
:::

{/* 공통 구성도 확인 (큐브리드만 예외 처리) */}
import CheckType from "../common-items/_db-install-agent-check-type.mdx";

<CheckType />

{/* 모니터링용 계정 생성 (DB별 내용 상이) */}
import Dbcreatemonitoringaccount from "../common-items/_db-create-monitoring-account.mdx";


## DBX 에이전트 다운로드

DBX 에이전트는 다음 중 한 가지 방법으로 다운로드합니다.

1. `wget` 명령으로 직접 다운로드합니다.

    ```bash title="BASH"
    # 일반 형식 (DB 유형 플레이스홀더 사용)
    wget -O whatap.agent.database.tar.gz "https://service.whatap.io/download/dbx_agent?type=<DB_TYPE>&format=tar.gz"

    # 예시: PostgreSQL
    wget -O whatap.agent.database.tar.gz "https://service.whatap.io/download/dbx_agent?type=postgresql&format=tar.gz"

    # 예시: Oracle
    wget -O whatap.agent.database.tar.gz "https://service.whatap.io/download/dbx_agent?type=oracle&format=tar.gz"
    ```

    사용 가능한 `<DB_TYPE>` 예시: `postgresql`, `oracle`, `mysql`, `redis`, `mongodb`, `mariadb` (환경에 따라 추가/제외될 수 있음)

2. 명령어 사용이 어려운 경우, 와탭 서비스 화면에서 <Cmdname sid="download" className="uitext" /> 버튼을 선택합니다.

    다운로드가 완료되면 압축을 해제합니다.

    ```bash title="BASH"
    tar -zxvf whatap.agent.database.tar.gz
    ```

    :::note

    보안 설정으로 인해 tar 형식의 파일을 다운로드할 수 없는 사용자를 위해 ZIP 형식의 파일도 함께 제공합니다. 설치 화면에서 <UI>.zip</UI> <Cmdname sid="download" className="uitext" /> 버튼을 선택하세요.

    :::

## DBX 에이전트 설정

에이전트 설치 화면의 안내에 따라 에이전트 설정을 진행하세요. 화면에 각 항목마다 필요한 정보를 입력하면 설정 내용 및 명령어를 자동 완성할 수 있습니다.

:::tip

postgresql,mysql의 경우
DBX 에이전트의 구성 파일 중 *setup.sh* 파일을 실행해 에이전트 설정을 빠르고 쉽게 진행할 수 있습니다. 
자세한 내용은 <Link to="install-agent-quick-setup" target="_blank">다음 문서</Link>를 참조하세요.

:::

{/* ### 와탭 서비스 설정 whatap.conf 설정, 제품별 상이 */}
### whatap.conf 설정

압축을 해제한 폴더로 이동해 *whatap.conf* 파일을 확인하세요. *whatap.conf* 파일에 프로젝트 액세스 키 정보 및 와탭 서버 정보, db 접속 정보를 입력하세요.

<InDoc product="oracle">

```ini title='whatap.conf'
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35 # WhaTap server information

dbms=oracle
db={DB_Name(SID)}
db_ip={DB_Server_IP}
db_port={DB_Server_Port} 

exclude_background=3
```

</InDoc>

<InDoc product="altibase">

```ini title='whatap.conf'
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35 # WhaTap server information
dbms=altibase
db=altibase
db_ip={DB_Server_IP}
db_port={DB_Server_Port} 
```

</InDoc>

<InDoc product="cubrid">

```ini title='whatap.conf'
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35 # WhaTap server information
dbms=cubrid
db={DB_Name}
db_ip={DB_Server_IP}
db_port={DB_Server_Port} 
cmd_port=8001 # CUBRID Manager server port number, default 8001
broker=query_editor,broker1
```

* `db`: 모니터링 대상 데이터베이스 이름으로 *$CUBRID_DATABASES/databases.txt* 파일의 `db_name` 값입니다.

* `db_ip`: 모니터링 대상 데이터베이스 서버에 접속 가능한 IP 주소입니다.

* `db_port`: 브로커 설정 파일(*cubrid_broker.conf*)에서 `BROKER_PORT` 항목에 정의된 값을 입력하세요. (CUBRID의 기본값 `BROKER_PORT: 33000`)

* `cms_port`: **CUBRID Manager**가 사용하는 포트입니다. **CUBRID Manager** 설정 파일(*cm.conf*)에서 `cm_port` 항목에 정의된 값을 입력하세요.

* `broker`: CUBRID를 설치하면 `broker1`, `query_editor`로 브로커가 기본 실행됩니다. 사용자가 임의로 브로커의 이름을 변경했거나 추가적으로 기동했을 경우 변경 사항을 입력하세요.

:::note

* *whatap.conf* 파일 설정에 대한 자세한 내용은 [다음 문서](agent-dbx-settings)를 참조하세요.

* CUBRID 환경의 *databases.txt* 파일에 대한 자세한 내용은 [다음 링크](https://www.cubrid.org/manual/ko/11.0/admin/db_manage.html#databases-txt)를 참조하세요.

* CUBRID의 브로커(broker) 설정에 대한 자세한 내용은 [다음 링크](https://www.cubrid.org/manual/ko/11.0/admin/config.html#broker-configuration)를 참조하세요.

:::

</InDoc>

<InDoc product="mssql">

```ini title="whatap.conf"
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35

dbms=mssql
db=master
db_ip=127.0.0.1
db_port=1433
```

:::note

**SSL 인증 문제가 발생하는 경우**

SSL 인증 관련 문제가 발생하면 *whatap.conf* 파일에 다음 옵션을 설정하세요.

```ini title="whatap.conf"
connect_option=encrypt=true;trustServerCertificate=true
```

:::

</InDoc>

<InDoc product="db2">

```ini title='whatap.conf'
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35 # WhaTap server information

dbms=db2
db={DB}
db_ip={DB_Server_IP}
db_port={DB_Server_Port} 
```

</InDoc>

<InDoc product="sapase">

```ini title='whatap.conf'
license={AccessKey}
whatap.server.host=13.124.11.223/13.209.172.35 # WhaTap server information

dbms=sap_ase
db={DB}
db_ip={DB_Server_IP}
db_port={DB_Server_Port} 
```

</InDoc>


{/* ### JDBC 다운로드, 제품별 상이*/}
import JDBCDownload from "../common-items/_db-download-jdbc-driver.mdx";

<JDBCDownload />

### db 유저 파일 생성

데이터베이스 접속을 위해 암호화된 UID를 생성합니다. username과 password를 입력하고 쉘 스크립트(또는 배치 파일)를 실행하세요. 

:::tip

user와 password를 사용하지 않는 경우 (인증 없이 MongoDB 또는 Redis에 접속 가능한 경우) **DB 유저 파일 생성** 단계를 건너뛰어도 됩니다.

:::

    * Redis
        * **Redis 6 버전 이하**: <em>uid.sh</em> 쉘 스크립트 파일(또는 <em>uid.bat</em> 배치 파일)은 와탭 데이터베이스 에이전트를 설치한 경로에서 찾을 수 있습니다. user 없이 암호만 있는 경우 <code>DB_USER</code>를 <code>""</code>로 설정합니다. 예, `./uid.sh "" whatap\!pwd`

        * **Redis 6 버전 이상**: <em>uid.sh</em> 쉘 스크립트 파일(또는 <em>uid.bat</em> 배치 파일)은 와탭 데이터베이스 에이전트를 설치한 경로에서 찾을 수 있습니다. user 없이 암호만 있는 경우 <code>DB_USER</code>를 <code>default</code>로 설정합니다. 예, `./uid.sh default whatap\!pwd`



{/* 데이터베이스에 접속하고 암호화된 UID를 생성하기 위해, 데이터베이스의 사용자 이름과 비밀번호를 입력한 후, 쉘 스크립트 또는 배치 파일을 실행합니다. 최초 1회 설정 후에는 암호화된 UID를 통해 모니터링 대상 데이터베이스 서버에서 데이터를 수집할 수 있습니다. DB 유저 파일을 생성하려면, 액세스 키가 whatap.conf 파일에 저장되어 있어야 합니다. */}

import Dbcreatedbuserfilebody from "../common-items/_db-create-db-user-file-body.mdx";

<Dbcreatedbuserfilebody /> 

{/*모니터링 시작하기*/}
import Dbrunagent from "../common-items/_db-run-agent.mdx";

<Dbrunagent />

import Dbinstallxosagent from "../common-items/_db-install-xos-agent.mdx";

<Dbinstallxosagent /> 

</Steps>

import NextStep from "../common-items/_db-next-step.mdx";

<NextStep />
