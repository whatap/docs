---
id: analysis-trace-mtx
title: 멀티 트랜잭션 추적
description: 시스템 내 또는 시스템 간에 발생하는 다양한 호출 관계를 한 눈에 파악하고 어느 부분에서 문제가 발생했는지 식별하여 개선할 수 있도록 트랜잭션과 트레이스 정보를 제공합니다.
tags: [ Java, 애플리케이션, 멀티 트랜잭션 ]
---

**멀티 트랜잭션**은 다른 에이전트나 프로젝트와 연관된 트랜잭션을 의미합니다. 와탭 프로젝트에 등록된 애플리케이션 서비스 간의 호출을 추적하는 것이 **멀티 트랜잭션 추적**입니다. 

<InDoc product="java">

:::info

Java 에이전트는 세 개의 HTTP 헤더 키값(`x-wtap-po`, `x-wtap-mst`, `x-wtap-sp1`)으로 멀티 트랜잭션을 추적합니다. 게이트웨이를 통과하는 HTTP 트랜잭션이 연계 추적이 안 된다면 HTTP 헤더 조건을 확인하세요.

:::

</InDoc>

:::note

**멀티 트랜잭션 활성화**

멀티 트랜잭션을 추적하려면 <Cmdname sid="management" className="uitext" /> &gt; <Cmdname sid="agent_configuration" className="uitext" /> 메뉴에서 `mtrace_enabled` 옵션을 `true`로 설정하세요. 에이전트 설정에 대한 자세한 내용은 [다음 문서](set-agent#set-agent-service)를 참조하세요.

:::

## 멀티 트랜잭션 ID 확인하기

<Cmdname sid="multi_server_transaction_trace" className="uitext" /> 메뉴를 이용하려면 <b>MTID</b>(Multi Transaction ID)가 필요합니다. 다음 과정을 통해 <b>MTID</b> 값을 확인할 수 있습니다.

1. <Cmdname sid="analysis" className="uitext" /> &gt; <Cmdname sid="AA005" className="uitext" /> 메뉴에서 차트 영역을 드래그하세요. 

1. 드래그한 차트 영역의 트랜잭션 정보가 다음과 같이 하단 <Cmdname sid="trace_list" className="uitext" /> 목록에 나타납니다.

    <ImgLang img='tx-trace-table.png' desc='mtrace_M' />

1. ![아이콘](/img/ic-s-mult-transation.svg) 아이콘이 표시된 트레이스를 선택하면 <Cmdname sid="TTL06527" className="uitext" /> 창이 나타납니다. 

1. <Cmdname sid="TTL06125" className="uitext" /> 탭에서 <Cmdname sid="TTL06107" className="uitext" /> 값을 확인할 수 있습니다. 

    <ImgLang img='tx-trace-dt-up.png' desc='레코드 요약' />

:::note

* 트랜잭션에서 외부 호출을 하는 경우에도 동일한 <Cmdname sid="TTL06107" className="uitext" />가 생성됩니다. 서비스별로 프로젝트가 분리되어 있더라도 처음 발급한 <Cmdname sid="TTL06107" className="uitext" />를 통해 애플리케이션 간의 모든 트랜잭션을 확인할 수 있습니다. <Cmdname sid="TTL06527" className="uitext" /> 창을 활용한 TX 트레이스 상세 분석에 관한 자세한 내용은 [다음 문서](trs-profile#details)를 참조하세요.

* <Cmdname sid="TTL06527" className="uitext" /> 창에서 <Cmdname sid="TTL06107" className="uitext" />를 선택하면 <Cmdname sid="TTL06377" className="uitext" /> 탭으로 이동합니다. 시스템 내 또는 시스템 간에 발생하는 다양한 호출 관계를 한 눈에 파악하고 어느 부분에서 문제가 발생했는지 식별하여 개선할 수 있도록 트랜잭션과 트레이스 정보를 제공합니다.

:::

## 멀티 트랜잭션 추적 기능 이용하기

1. <Cmdname sid="analysis" className="uitext" /> &gt; <Cmdname sid="multi_server_transaction_trace" className="uitext" /> 메뉴로 이동하세요.

1. <Cmdname sid="TTL06527" className="uitext" /> 창에서 확인한 <b>MTID</b> 값을 <Cmdname sid="search_mtid_or_custid" className="uitext" /> 항목에 입력하세요.

    <ImgLang img='trace-mtx-mtid.png' desc='MTID' />

1. 조회할 날짜와 프로젝트를 선택하세요.

1. 화면 아래에 <Cmdname sid="apply" className="uitext" /> 버튼을 선택하세요.

오른쪽 <Cmdname sid="BTN07120" className="uitext" /> 탭에 각 트랜잭션의 호출 관계를 파악할 수 있는 다이어그램이 표시됩니다.

<ImgLang img='trace-mtx-mtid-chart.png' desc='멀티 트랜잭션 추적' />


### <Cmdname sid="BTN07120" />

<Cmdname sid="BTN07120" className="uitext" />는 각 트랜잭션의 호출 관계를 빠르고 명확하게 사용자에게 제공합니다. 동일한 <Cmdname sid="TTL06107" className="uitext" />를 갖는 트랜잭션 서비스들의 개별 수행 시간을 확인할 수 있습니다. 트랜잭션 노드의 배경색으로 표현되어 있는 소요 시간(<LinkImage img="number-01.png" desc="number 1"/> <Cmdname sid="time_bar" className="uitext" />)를 통해 트랜잭션 간 호출 관계를 확인할 수 있습니다. <Cmdname sid="BTN07120" className="uitext" />에서는 마우스를 이용해 원하는 위치로 이동하거나 스크롤을 통해서 확대, 축소할 수 있습니다.

![Chart](/img/trace-mtx-chart-timebar.png)

* <Cmdname sid="time_bar" className="uitext" />: 각 노드에 소요 시간(<Cmdname sid="time_bar" className="uitext" />)을 표시하거나 숨길 수 있습니다.

* <Cmdname sid="application_name" className="uitext" />: 각 노드에 에이전트 이름(oname)을 표시하거나 숨길 수 있습니다.

* <Cmdname sid="project" className="uitext" />: 각 노드에 프로젝트 이름을 표시하거나 숨길 수 있습니다.

* <Cmdname sid="database" className="uitext" /> / <Cmdname sid="apply_external_remote" className="uitext" /> / <Cmdname sid="apply_internal_remote" className="uitext" />: 해당 트랜잭션에서 발생한 다른 데이터베이스 커넥션 요청이나 HTTP Call의 정보 또한 차트의 노드로 확인할 수 있습니다.

* ***A***<Cmdname sid="small" className="uitext" /> / ***A***<Cmdname sid="big" className="uitext" />: 다이어그램에 표시된 폰트 크기를 조절할 수 있습니다.

