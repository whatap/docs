---
id: metric-warning-notice
title: 메트릭스 경고 알림
description: 구체적이고 복잡한 이벤트를 설정하려면 메트릭스 이벤트 설정을 사용하세요.
keywords: [ 경고 알림, 메트릭스 이벤트, 쿠버네티스 모니터링 ]
---

import Metricswarningnotice from "../common-items/_metrics-warning-notice.mdx";

<Metricswarningnotice /> 

import Compositemetricswarningnotice from "../common-items/_composite-metrics-warning-notice.mdx";

<Compositemetricswarningnotice /> 

import Metricseventmodifydelete from "../common-items/_metrics-event-modify-delete.mdx";

<Metricseventmodifydelete />

import Metricseventconditionselecttargetguide from "../common-items/_metrics-event-condition-select-target-guide.mdx";

<Metricseventconditionselecttargetguide />

## 템플릿 {#template}

### 메트릭스 이벤트 템플릿 

:::note 

쿠버네티스 이벤트의 `reason` 필드 정보는 [쿠버네티스 공식 문서](https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/events/event.go#L27)를 참조하세요. 

:::

#### ***BackOff***

Kubernetes 이벤트의 `reason` 필드 정보 중 `BackOff`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다. 

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***Evicted***

Kubernetes 이벤트의 `reason` 필드 정보 중 `Evicted`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***FailedCreatePodSandBox***

Kubernetes 이벤트의 `reason` 필드 정보 중 `FailedCreatePodSandBox`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***FailedMount***

Kubernetes 이벤트의 `reason` 필드 정보 중 `FailedMount`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***FailedScheduling***

Kubernetes 이벤트의 `reason` 필드 정보 중 `FailedScheduling`이 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***FailedSync***

Kubernetes 이벤트의 `reason` 필드 정보 중 `FailedSync`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***NodeNotReady***

Kubernetes 이벤트의 `reason` 필드 정보 중 `NodeNotReady`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***Unhealthy***

Kubernetes 이벤트의 `reason` 필드 정보 중 `Unhealthy`가 0회 이상 찍힌 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 쿠버네티스 이벤트 메시지(Kube Event `${message}`)

#### ***컨테이너 CPU 할당량 기준 사용률 알림***

컨테이너의 CPU Limit 기준 CPU 전체 사용량(`${cpu_per_quota}`)이 70% 이상인 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${okindName}`의 `${oname}` 컨테이너의 CPU 사용률이 `${cpu_per_quota}`% >= 70%로 높습니다.

#### ***컨테이너 메모리 Fail Count***

컨테이너 메모리 Limit 도달 건수가 1회 이상인 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${okindName}`의 `${oname}` 컨테이너가 limit을 초과하여 `${mem_failcnt}`가 증가였습니다.

#### ***컨테이너 메모리 사용률***

컨테이너 메모리 Limit 기준 사용량(`${container.mem_percent}`)이 90% 이상이 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${okindName}`의 `${oname}` 컨테이너 메모리 사용률이 `${container.mem_percent}`% >= 90% 입니다.

#### ***컨테이너 DEAD 상태 알림***

컨테이너 상태 코드가 `100`일 경우 해당 알림이 발생합니다. 상태 코드 `100`은 `DEAD`를 의미합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${oname}` 컨테이너가 `DEAD` 상태 입니다.

#### ***클러스터 CPU Request 알림***

노드 할당 가능한 CPU량을 Limit CPU 총합으로 나눈 값에 100을 곱한 값이 80% 이상이면 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 클러스터 CPU 할당량 대비 CPU Request(최소 요구자원)가 80% 이상입니다.

#### ***클러스터 Memory Request 알림***

노드 할당 가능한 메모리량을 Limit Memory 총합으로 나눈 값에 100을 곱한 값이 80% 이상이면 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 클러스터 Memory 할당량 대비 Memory Request(최소 요구자원)가 80% 이상입니다.

#### ***클러스터 CPU Request 알림***

노드 할당 가능한 CPU량을 Limit CPU 총합으로 나눈 값에 100을 곱한 값이 60% 이상이면 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 클러스터 CPU 할당량 대비 CPU Request(최소 요구자원)가 60% 이상입니다.

#### ***클러스터 Memory Request 알림***

노드 할당 가능한 메모리량을 Limit Memory 총합으로 나눈 값에 100을 곱한 값이 60% 이상이면 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 클러스터 Memory 할당량 대비 Memory Request(최소 요구자원)가 60% 이상입니다.

#### ***클러스터 POD수 알림***

노드에 할당 가능한 Pod가 존재하지 않을 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> 마스터에 할당 가능한 POD 개수는 0입니다.

#### ***노드 CPU 사용률 알림***

노드의 CPU 사용률(`${cpu}`)이 70% 이상일 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${oname}`의 CPU 사용률이 `${cpu}`% >= 70% 입니다.

#### ***노드 메모리 사용률 알림***

노드의 메모리 사용률(`${memory_pused}`)이 90% 이상일 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> `${oname}`의 메모리 사용률이 `${memory_pused}`% >= 90% 입니다.

#### ***할당 불가능 노드 알림***

노드에 할당 가능한 Pod 수가 0개 이하일 경우 알림이 발생합니다. 


#### ***APDEX***

트랜잭션이 존재하면서 APDEX 점수가 0.7점보다 낮을 경우 해당 알림이 발생합니다.  <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

노드에 할당 가능한 Pod 수가 0개 이하일 경우 해당 알림이 발생합니다.  <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> APDEX가 0.7 보다 작습니다 (`${oname}`)


{/* 

#### ***HPA CPU 사용률 알림***

현재 실행 중인 Pod의 수가 리소스 내 최대 Pod 수와 같고 CPU 사용률이 70% 이상일 경우 해당 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> HPA POD 생성 최대치에 도달하였고 CPU 사용률이 >= 70% 상태 입니다.

#### ***HPA 메모리 사용률 알림***

현재 실행 중인 Pod의 수가 리소스의 허용 가능한 최대 Pod 수와 같고 메모리 사용률이 90% 이상일 경우 해당 알림이 발생합니다. 

> HPA POD 생성 최대치에 도달하였고 메모리 사용률이 >= 90% 상태 입니다.

*/}

### 복합 메트릭스 이벤트 템플릿 

#### ***Inactive agents has been found***

활성화된 에이전트의 수가 지정한 조건보다 적을 때 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다. 

> `${ip}` `${okindName}` The number of active agents has decreased to `${num_of_current_agents}`. 

#### ***TPS has changed by more than 30% compared to the previous week***

애플리케이션의 TPS 가 전주 대비 30% 이상 변화했을 때 알림이 발생합니다. 메시지 예시는 다음과 같습니다.

> `${okindName}` a week ago : `${prev_week_tps_display}`, current : `${current_tps_display}`,  difference : `${one_week_diff_display}`

#### ***Very slow active transactions detected***

애플리케이션의 8초 초과 구간 트랜잭션 수가 평균 10개를 넘어갔을 때 알림이 발생합니다. 메시지 예시는 다음과 같습니다.

> `${okindName}` `${very_slow_tx_cnt_m5_avg_display}` active transactions performed for more than 8 seconds were detected.

#### ***APDEX score dropped***

APDEX 점수가 70 미만이 되면 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> The average apdex of `${pname}` in the last 5 seconds is `${apdex_display}`

#### ***CPU % is too high***

노드의 CPU 사용률이 80% 초과 시 알림이 발생합니다. 메시지 예시는 다음과 같습니다.

> CPU utilization rate of the `${oname}` in the last minute > `${_rule_}` %

#### ***CPU User % is too high***

사용자가 사용하는 CPU 사용률이 50% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> CPU User utilization rate of the `${oname}` in the last minute > `${_rule_}` %

#### ***The number of agents with high CPU SYS % is too large***

시스템이 사용하는 CPU 사용률이 50% 초과 시 알림이 발생합니다. 메시지 예시는 다음과 같습니다. 

> The number of agents with a CPU SYS of 70% or more in the last minute > `${_rule_}` %

#### ***The Disk I/O is too high***

디스크 I/O 사용률이 10% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> In the last minute, `${oname}`'s Disk I/O > `${_rule_}` %

#### ***The Disk Used % is too high***

파일 시스템 사용률이 90% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> In the last minute, `${oname}`'s Disk Used > `${_rule_}` %

#### ***Network Traffic I/O is too high***

네트워크 인바운드 트래픽/아웃바운드 트래픽이 10% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> In the last minute, `${oname}`'s Network Traffic I/O > `${_rule_}` %

#### ***Network Packet I/O is too high***

네트워크 인바운드 패킷/아웃바운드 패킷이 10% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> In the last minute, `${oname}`'s Network Packet I/O > `${_rule_}` %

#### ***Network Error I/O is too high***

네트워크 인바운드 에러/아웃바운드 에러가 10% 초과 시 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> In the last minute, The maximum value of the `${oname}`'s Network Error I/O > `${_rule_}` %

#### ***The kube-apiserver latency over 10 second***

컨트롤 플레인 컴포넌트 중 kube-apiserver의 latency가 10초 초과 시 알림이 발생합니다. 단 WATCH 행위는 제외합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> Latency of the `${verb}` verb in `${instance}` of kube-apiserver exceeded `${metricValue}` seconds.

#### ***The kube-apiserver response increase/decrease rate for error codes***

컨트롤 플레인 컴포넌트 중 kube-apiserver의 에러 응답이 50건을 초과하고 증감률이 50% 이상 변화한 경우 알림이 발생합니다. <Cmdname sid="message" className="uitext" /> 예시는 다음과 같습니다.

> Rate of increase in the number of requests for code `${code}` on instance `${instance}` of kube-apiserver exceeded `${metricValue}`.