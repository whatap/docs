---
id: agent-dbsql
title: DB, SQL
description: Node.js 에이전트의 DB, SQL 관련 옵션을 제공합니다.
keywords: [ Node.js, DB, SQL ] 
---

Node.js 에이전트의 DB, SQL 관련 옵션을 제공합니다.

* **profile_sql_param_enabled** <span class='type'>Boolean</span> <ScrollToLink anchor='profile-sql-param' />

  기본값 `false`

  SQL 파라미터를 수집을 활성화합니다. 단 파라미터는 별도 보안 키를 입력해야 조회할 수 있습니다. 보안 키는 에이전트 설치 경로의 *paramkey.txt* 파일에 6자리로 지정합니다. *paramkey.txt*가 존재하지 않는 경우 자동 생성되며 random 키가 설정됩니다.

* **profile_connection_open_enabled** <span class='type'>Boolean</span>

  기본값 `true`

  트레이스 내역에 DBConnection 오픈 정보를 기록합니다.

* **profile_error_sql_fetch_max** <span class='type'>Int</span> <ScrollToLink anchor='profile_error_sql_fetch_max' />

  기본값 `10000`

  SQL Fetch Count(호출 건 수)가 설정한 값을 초과하면 **TOO_MANY_RECORDS** 에러로 처리합니다. `0`으로 설정하면 에러 처리하지 않습니다.

* **profile_error_sql_time_max** <span class='type'>Int</span> <ScrollToLink anchor='profile_error_sql_time_max' />

  기본값 `30000`

  SQL 수행 시간이 설정한 값을 초과하면 **SLOW_SQL** 에러로 처리합니다. `0`으로 설정하는 경우 에러 처리를 하지 않습니다.

* **trace_sql_normalize_enabled** <span class='type'>Boolean</span>

  기본값 `true`

  SQL 문에서 리터럴 부분을 추출해 SQL 문을 정규화하는 기능을 활성화합니다.

* **hook_connection_open_patterns** <span class='type'>String</span>

  DB Connection Open 시 호출하는 메소드를 등록합니다. 미리 설정하지 않은 Connection Pool의 getConnection을 등록하는 것이 일반적입니다.

  ```ini title='Example'
  hook_connection_open_patterns=mypool.ConPool.getConnection
  ```

* **trace_sql_error_stack** <span class='type'>Boolean</span>

  기본값 `false`

  SQL에 대한 오류 내용을 스택으로 저장(MySQL, MariaDB, PostgreSQL, SQL Server)합니다.

* **trace_sql_error_depth** <span class='type'>Int</span>

  기본값 `50`

  `trace_sql_error_stack` 옵션을 적용할 경우 저장되는 오류의 라인 수를 설정합니다.