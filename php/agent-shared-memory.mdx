---
id: agent-shared-memory
title: 공유 메모리
description: PHP 에이전트 공유 메모리에 대한 설명입니다.
tags:
    - 공유 메모리
    - PHP
    - 설정하기
    - 애플리케이션    
---

* **whatap.shm_enabled** <span class='type'>String</span>

  공유 메모리 사용 여부를 설정합니다. Apache 또는 PHP-FPM 다시 시작 후 적용됩니다.

  * PHP extension(*whatap.so*)와 whatap-php service 간에 공유 메모리를 이용한 IPC 기능을 추가했습니다.
  
  * `shm_key`의 값으로 설정된 키로 생성합니다. 이미 키가 사용되고 있다면 다른 키를 설정할 수 있습니다.

  * whatap-php service에서 공유 메모리 생성 및 삭제를 관리합니다. PHP extension에서는 조회 기능만 수행합니다.

* **whatap.shm_key** <span class='type'>String</span>

  공유 메모리를 생성할 때 필요한 키 정보입니다. Apache 또는 PHP-FPM 그리고 whatap-php 서비스를 다시 시작해야 적용됩니다.

* **whatap.active_stat_enabled** <span class='type'>Boolean</span>

  기본값 `true`

  액티브 스테이터스 사용 여부를 설정합니다.  

  공유 메모리를 통해 진행 중인 요청의 현재 상태를 5초 간격으로 수집합니다. 대시보드 화면에 액티브 스테이터스 그래프가 표기됩니다. 상태는 일반 함수, SQL, DB connection, 외부 HTTP 연결, 소켓 연결이 있으며 각 상태별로 진행 중인 요청 개수를 표시합니다.

  Apache 또는 PHP-FPM를 다시 시작해 진행 중인 프로세스가 처리 중에 종료되면 정상적으로 액티브 스테이터스 완료 처리가 되지 않아 오차가 발생할 수 있습니다.

  1. 액티브 트랜잭션 수와 많은 차이가 발생하는 경우 설정에서 `whatap.active_stat_enabled`를 `false`로 설정합니다. 

  1. 대시보드에서 0건으로 초기화되면 다시 `true`로 설정합니다.
