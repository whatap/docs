---
id: metrics-data-list
title: PostgreSQL 지표
description: PostgreSQL 데이터베이스 지표를 안내합니다.
keywords: [ PostgreSQL, 메트릭스, 데이터베이스, 데이터베이스 모니터링 ]
---

데이터베이스 메트릭은 데이터베이스의 작업량과 리소스 사용량을 포괄적으로 수집합니다. 와탭 모니터링 서비스는 지속적으로 지표를 수집하여 데이터베이스의 병목 현상을 확인하고, 성능 문제의 근본 원인을 식별하는 데 도움이 되는 데이터를 제공합니다.

그외 지표에 대한 자세한 내용은 [다음 링크](https://www.postgresql.org/docs/)를 참조하세요.

| 지표 | 단위 | 설명 | 카테고리 |
| -- | :---: | -- | -- |
| `active_sessions` | - | 쿼리를 실행하는 총 연결 수 | Connection |
| `blk_read_time` | millisecond | 백엔드에서 데이터 파일 블록을 쓰는 데 소요된 시간 | I/O |
| `blk_write_time` | millisecond | 백엔드에서 데이터 파일 블록을 쓰는 데 소요된 시간 | I/O |
| `blks_hit` | - | 디스크 블록이 이미 버퍼 캐시에서 발견되어 읽기가 필요하지 않은 총 횟수 | I/O |
| `blks_hit_ratio` |  pct | 버퍼 캐시 적중율을 의미합니다. sum(`blks_hit`)/sum(`blks_hit` + `blks_read`) \* 100 으로 구할 수 있습니다. | I/O |
| `blks_read` | - | 이 데이터베이스에서 읽은 총 디스크 블록 수 | I/O |
| `buffers_checkpoint` | - | checkpointer 프로세스가 기록한 총 버퍼 수 | Info |
| `check_point` | - | checkpoint가 수행 된 횟수 | Troughput |
| `checkpoint_write_time` | millisecond | 체크포인트 작업으로 발생한 디스크 쓰기 작업의 밀리세컨드 총 시간. | Troughput |
| `checkpoints_timed` | - | `checkpoint_timeout` 환경 설정값에 따른 체크 포인트 작업 회수 | Troughput |
| `commit_count` | - | 커밋된 이 데이터베이스의 트랜잭션 수 | Troughput |
| `conflicts` | - | 데이터베이스 복구 작업과 충돌이 나서 수행이 취소된 쿼리수 | Troughput |
| `connect_error` | - | 에이전트에서 데이터베이스 접속 실패 시 카운트되는 수 | Connection |
| `deadlock_count` | - | 해당 데이터베이스에서 감지된 총 교착 상태 수 | Performance |
| `dml_count` | - | dml 수행 수 | Troughput |
| `index_hit_ratio` |  pct | index를 buffer cache에서 읽은 비율 | Performance |
| `lock_wait_sessions` | - | lock을 대기하는 세션 수 | Performance |
| `long_running_sessions` | - | long running time(default: 10초)이상 수행 중인 세션 수 | Performance |
| `max_connections` | - | 최대 연결 가능 수로 `pg_settings`에 설정된 값입니다. 부족하면 'FATAL ERROR: too many clients already.' 에러가 발생할 수 있습니다. | Info |
| `node_state` | - | Replication 관계로 구성된 데이터베이스이며 `1`: Master, `2`: Slave 를 의미함 | Info |
| `numbackends` | - | 연결된 백엔드 수 | Info |
| `replication_count` | - | Replication 데이터베이스(Slave)의 개수 | Performance |
| `replication_delay` | - | Replication 구조일 경우 replication 데이터베이스에 반영되는 지연시간, Slave DB에서 측정되는 지표 | Performance |
| `rollback_count` | - | 롤백된 이 데이터베이스의 총 트랜잭션 수 | Performance |
| `table_hit_ratio` | - | table을 buffer cache에서 읽은 비율 | Performance |
| `temp_bytes` | - | 해당 데이터베이스의 쿼리에 의해 임시 파일에 기록된 총 데이터 양 | Performance |
| `temp_files` | - | 해당 데이터베이스에서 쿼리로 생성된 총 임시 파일 수 | Performance |
| `total_runtime` | - | 모든 active session들의 runtime(elapse time)의 합 | Performance |
| `total_sessions` | - | 현재 연결되어 있는 총 세션 수 | Connection |
| `tup_deleted` | - | 해당 데이터베이스에서 쿼리에 의해 삭제된 총 행 수 | Troughput |
| `tup_fetched` | - | 해당 데이터베이스에서 쿼리로 가져온 총 행 수 | Troughput |
| `tup_inserted` | - | 해당 데이터베이스에서 쿼리에 의해 삽입된 총 행 수 | Troughput |
| `tup_returned` | - | 해당 데이터베이스의 쿼리에서 반환된 행 수 | Troughput |
| `tup_updated` | - | 해당 데이터베이스에서 쿼리에 의해 업데이트된 총 행 수 | Troughput |
| `vacuum_running_count` | - | 현재 vacuum 처리가 돌고 있는 프로세스 수 | Performance |
| `wait_sessions` | - | 총 대기 연결 수 | Performance |
| `seq_scan` | - | 테이블을 Full Scan하면서 레코드를 읽는 방식<br/>인덱스가 존재하지 않거나, 인덱스가 존재하더라도 읽어야 할 범위가 넓은 경우에 선택합니다. 이 지표는 1분마다 조회한 값입니다. | Performance |
| `idx_scan` | - | 인덱스 Leaf 블록에 저장된 키를 이용해서 테이블 레코드를 액세스하는 방식, 이 지표는 1분마다 조회한 값입니다. | Performance |
| `wal` | - | WAL 파일 개수. WAL 파일 수의 급증은 일반적으로 단기간에 대량의 변경 사항이나 임시 테이블 및 객체를 생성하는 vacuum과 유사한 유지 관리 작업으로 인해 발생합니다. 이는 천천히 정상 수준으로 돌아와야 합니다. 이로 인해 일반적으로 많은 디스크 I/O 및 CPU 활동이 발생하여 상황이 정상으로 돌아올 때까지 애플리케이션 쿼리 실행 속도가 느려집니다. 이 지표는 1분마다 조회한 값입니다. | Performance |
| `cpu(xos2)` |  pct | cpu 사용율, `cpu_user` + `cpu_sys` + `cpu_iowait`의 합 | XOS |
| `cpu_user(xos2)` |  pct | cpu가 사용자 코드를 실행하는데 소요한 시간 | XOS |
| `cpu_sys(xos2)` |  pct | cpu가 kernel code를 수행한 시간 | XOS |
| `cpu_iowait(xos2)` |  pct | cpu가 IO를 대기한 시간 | XOS |
| `cpu_idle(xos2)` |  pct | cpu 프로세서 유휴 시간 | XOS |
| `mem(xos)` |  pct | 메모리 사용율 | XOS |
| `mem_total(xos)` |  MB | 전체 메모리양 | XOS |
| `mem_free(xos)` |  MB | 시스템에서 사용하고 있지 않은 메모리양 | XOS |
| `mem_used(xos)` |  MB | 시스템에서 사용하고 있는 메모리양 | XOS |
| `mem_buffcache(xos)` |  MB | buff/cache로 사용중인 메모리양 | XOS |
| `mem_swaptotal(xos)` |  MB | Swap 전체 사이즈, 물리메모리가 부족한 경우를 대비하여 설정합니다. | XOS |
| `mem_swapfree(xos)` |  MB | Swap의 사용하지 않은 영역, Swap 영역은 디스크 공간에 확보되기 때문에 Swap을 사용하고 있다면 시스템 성능이 급격하게 떨어질 수 있습니다. | XOS |
| `mem_available(xos)` |  MB | 메모리 가용영역 | XOS |
| `disk_reads(xos)` | block | 디스크로부터 읽은 데이터의 양 | XOS |
| `disk_read_bytes(xos)` | byte | 디스크로부터 읽은 데이터의 양 | XOS |
| `disk_writes(xos)` | block | 디스크로 쓰여진 데이터의 양 | XOS |
| `disk_write_bytes(xos)` | byte | 디스크로 쓰여진 데이터의 양 | XOS |
| `net_recv_bytes(xos)` | byte | 네트워크로 수신된 데이터의 양 | XOS |
| `net_recv_packets(xos)` |   - | 네트워크로 수신된 데이터 패킷의 수 | XOS |
| `net_send_bytes(xos)` | byte | 네트워크로 전송한 데이터의 양 | XOS |
| `net_send_packets(xos)` |   - | 네트워크로 전송한 데이터 패킷의 수 | XOS |
