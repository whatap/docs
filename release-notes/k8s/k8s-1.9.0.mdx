---
id: k8s-1_9_0
title: Kubernetes Agent v1.9.0
toc_max_heading_level: 2
pagination_next: release-notes/k8s/k8s-1_8_9
displayed_sidebar: releaseSidebar
---

> **Java Agent v2.2.68 포함**

2026년 01월 14일 

<Status priority='1'>New</Status> **Kubernetes 라벨 수집 정책 개선**

Kubernetes 환경에서 파드(Pod) 및 컨테이너 라벨 수집 방식을 개선했습니다. 기존 수집 방식에서 발생하던 태그 충돌 문제를 해결하고, 불필요한 라벨 수집을 제어하여 데이터 식별성과 저장 효율성을 향상시켰습니다.

    - **라벨 식별성 강화(Prefix 지원)**

        - Kubernetes 라벨과 에이전트 내부 태그(System Tag)를 명확히 구분

        - 사용자 정의 Kubernetes 라벨에 접두사(Prefix)를 붙여 저장할 수 있는 옵션 추가

    - **수집 필터링 도입(Label Filtering)**

        - 무분별한 라벨 수집을 방지하기 위해 **허용 목록(Allowlist)** 또는 **제외 목록(Blocklist)** 기반의 필터링 도입

    - **신규 설정 옵션 (`whatap.conf`)**

        | 설정 키 | 기본값 | 설명 |
        | --- | --- | --- |
        | `kube_label_prefix_enabled` | <code>false</code> | `true` 설정 시 수집된 라벨 키 앞에 접두사를 붙여 저장 |
        | `kube_label_prefix` | `whatap_kube_label_` | 접두사 활성화 시 사용할 문자열 <br /> - 예: `app` → `whatap_kube_label_app` |
        | `kube_label_keys` | - | **수집 허용 목록** <br /> 콤마(`,`)로 구분된 키 목록 설정 시 해당 라벨만 수집 (권장) |
        | `kube_label_exclude_keys` | - | **수집 제외 목록** <br /> 허용 목록이 없을 때 동작하며, 설정된 키를 가진 라벨은 수집하지 않음 |

    - **라벨 수집 동작 방식 및 우선순위**  

        데이터 수집 시 다음 순서로 라벨 처리 로직이 적용됩니다.

        1. **Allowlist 체크**(`kube_label_keys`): 설정이 존재할 경우, 목록에 포함된 라벨만 수집

        2. **Blocklist 체크**(`kube_label_exclude_keys`): Allowlist가 없는 경우, 제외 목록에 포함된 라벨은 수집하지 않음

        3. **Prefix 적용**(`kube_label_prefix_enabled`): 최종 수집 대상 라벨에 접두사를 적용하여 키 변경 (원본 키는 저장하지 않음)

    - **설정 예시**  
    
        - **Case 1: 데이터 충돌 방지 및 핵심 라벨만 수집 (권장)**  

            시스템 태그와의 충돌을 완벽히 방지하고, 필요한 라벨만 수집하여 비용을 절감합니다.

            ```conf title='데이터 충돌 방지 및 핵심 라벨만 수집 (권장) '
            kube_label_prefix_enabled=true
            kube_label_keys=app,env,version,service
            ```

        - **Case 2: 특정 불필요 라벨만 제외**  

            자동 생성되는 불필요한 라벨(예: Helm, CI/CD 메타데이터)만 제거합니다.

            ```conf title='특정 불필요 라벨만 제외'
            kube_label_prefix_enabled=true
            kube_label_exclude_keys=helm.sh/chart,jenkins-build-id,controller-uid
            ```

    :::note

    **향후 기본값 변경(6개월 후 적용 예정)**  

    수집 서버 부하 최적화 및 데이터 식별성 강화를 위해 기본값이 변경될 예정입니다.

    - `kube_label_prefix_enabled`: `false` → `true`
    - `kube_label_keys`: (없음) → `app`  

    변경 적용 후, 기본적으로 `app` 라벨만 `whatap_kube_label_app` 키로 수집됩니다. 추가 라벨 수집이 필요한 경우 `kube_label_keys`에 직접 명시해야 하며, 기존 환경과의 호환성이 필요한 경우 사전 설정 확인을 권장합니다.

    :::

:::info

Agent download: [kube_mon_1.9.0.tar](https://repo.whatap.io/docker/kube_mon_1.9.0.tar)

:::